{"version":3,"file":"mdds-angular-auth.umd.js.map","sources":["ng://mdds-angular-auth/auth/tokens.ts","ng://mdds-angular-auth/auth/auth.service.ts","ng://mdds-angular-auth/auth/auth.guard.ts","ng://mdds-angular-auth/auth/auth.component.ts","ng://mdds-angular-auth/auth/login/login.component.ts","ng://mdds-angular-auth/auth/register/register.component.ts","ng://mdds-angular-auth/auth/auth-routing.module.ts","ng://mdds-angular-auth/auth/auth.interceptor.ts","ng://mdds-angular-auth/auth/auth-icon/auth-icon.component.ts","ng://mdds-angular-auth/auth/auth-icon/click-elsewhere.directive.ts","ng://mdds-angular-auth/auth/auth.module.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\n\nexport const AUTHTICATION_SERVER_ROOT_URI = new InjectionToken('AUTHTICATION_SERVER_ROOT_URI');\nexport const AUTHTICATION_LOGIN_PAGE_URI = new InjectionToken('AUTHTICATION_LOGIN_PAGE_URI');\nexport const AUTHTICATION_INTERFACES = new InjectionToken('AUTHTICATION_INTERFACES');","import { Injectable, Inject } from '@angular/core';\nimport { HttpClient, HttpParams, HttpHeaders, HttpErrorResponse } from '@angular/common/http';\nimport { catchError, map, filter, retry } from 'rxjs/operators';\nimport { Observable, of } from 'rxjs';\nimport { Router, NavigationEnd  } from '@angular/router';\n\nimport { AUTHTICATION_SERVER_ROOT_URI } from './tokens';\n\n@Injectable()\nexport class AuthenticationService {\n\n  private interruptedUrl: string;\n  private routedFromUrl: string;\n\n  private previousUrl: string;\n  private currentUrl: string;\n  private navigateEndTime: number;\n  \n  private adminInterface: boolean = false;\n\n  constructor(\n            @Inject(AUTHTICATION_SERVER_ROOT_URI) private authServerRootUri: string,\n            private router: Router,\n            private http: HttpClient) {\n    this.navigateEndTime = Date.now();\n\n    router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        this.previousUrl = this.currentUrl;\n        this.navigateEndTime = Date.now();\n        if (event.urlAfterRedirects) {\n          this.currentUrl = event.urlAfterRedirects;\n        } else {\n          this.currentUrl = event.url;\n        }\n      }\n    });\n    \n    this.adminInterface = JSON.parse(localStorage.getItem('adminInterface'));\n  }\n\n  isAuthorized(): boolean {\n    const authRecord = JSON.parse(localStorage.getItem('mdds-auth-record'));\n    if (authRecord && authRecord['accessToken']) {\n      return true;\n    }\n    return false;\n  }\n\n  private getLogoutTime(): number {\n    const authRecord = JSON.parse(localStorage.getItem('mdds-auth-record'));\n    if (authRecord && 'logoutTs' in authRecord) {\n        return authRecord.logoutTs;\n    }\n    return 0;\n  }\n\n  public getAccessToken(): string {\n    const authRecord = JSON.parse(localStorage.getItem('mdds-auth-record'));\n    if (authRecord) {\n      return authRecord['accessToken'];\n    }\n    return null;\n  }\n\n  public refreshToken(): Observable<any> {\n    let authRecord: any = JSON.parse(localStorage.getItem('mdds-auth-record'));\n    if (!authRecord) {\n      authRecord = {refreshToken: '', userName: ''};\n    }\n    const refreshToken: string = authRecord['refreshToken'];\n    const userName: string = authRecord['userName'];\n\n    return this.http.post<any>(\n        this.authServerRootUri + '/refresh',\n        {refreshToken: refreshToken, userName: userName}\n      ).pipe(\n        map(this.loggedIn),\n        catchError(error => {\n          this.logout();\n          return error;\n        }\n      )\n    );\n  }\n\n  public refreshShouldHappen(response: HttpErrorResponse): boolean {\n    return response.status === 401;\n  }\n\n  public verifyTokenRequest(url: string): boolean {\n    if ( url.endsWith(this.authServerRootUri + '/refresh') ||\n        url.endsWith(this.authServerRootUri + '/login')) {\n      return true;\n    }\n        return false;\n  }\n\n  public getInterruptedUrl(): string {\n    return this.interruptedUrl || '/';\n  }\n\n  public getRoutedFromUrl() {\n    return this.routedFromUrl || '/';\n  }\n\n  public setInterruptedUrl(url: string): void {\n    this.interruptedUrl = url;\n    const currentTime = Date.now();\n\n    if ( currentTime - this.navigateEndTime > 1000) {\n      // Happend > 1 sec. assume it is triggered from current page.\n      this.routedFromUrl = this.currentUrl;\n    } else {\n      // page transitioned\n      this.routedFromUrl = this.previousUrl;\n    }\n  }\n\n  public getUserName(): string {\n    let authRecord: any = JSON.parse(localStorage.getItem('mdds-auth-record'));\n    if (!authRecord) {\n      authRecord = {userName: ''};\n    }\n    return authRecord['userName'];\n  }\n\n  login(userName: string, password: string) {\n    const authRecord: any = {\n      userName: userName,\n      accessToken: '',\n      refreshToken: '',\n      displayName: ''\n    };\n    localStorage.setItem('mdds-auth-record', JSON.stringify(authRecord));\n\n    const options = this.adminInterface ?\n       { params: new HttpParams().set('type', 'admin') } : {};\n    \n    return this.http.post<any>(this.authServerRootUri + '/login',\n        { username: userName, password: password }, options\n      ).pipe(map(this.loggedIn));\n  }\n\n  register(userInfo: any) {\n    localStorage.removeItem('mdds-auth-record');\n    const authRecord: any = {\n      userName: userInfo.userName,\n      accessToken: '',\n      refreshToken: '',\n      displayName: userInfo.displayName\n    };\n    localStorage.setItem('mdds-auth-record', JSON.stringify(authRecord));\n    \n    const options = this.adminInterface ?\n       { params: new HttpParams().set('type', 'admin') } : {};\n\n    return this.http.post<any>(this.authServerRootUri + '/register', userInfo, options);\n  }\n\n  loggedIn(user) {\n    const authRecord: any = {\n      userName: '',\n      accessToken: '',\n      refreshToken: '',\n      displayName: ''\n    };\n    if (user && user.accessToken) {\n      authRecord['accessToken'] = user.accessToken;\n    }\n    if (user && user.refreshToken) {\n      authRecord['refreshToken'] = user.refreshToken;\n    }\n    if (user && user.displayName) {\n      authRecord['displayName'] = user.displayName;\n    }\n    if (user && user.userName) {\n      authRecord['userName'] = user.userName;\n    }\n    localStorage.setItem('mdds-auth-record', JSON.stringify(authRecord));\n    return user;\n  }\n\n  logout() {\n    // remove user from local storage to log user out\n    let authRecord = JSON.parse(localStorage.getItem('mdds-auth-record'));\n    if (!authRecord) {\n        authRecord = {};\n    }\n    authRecord.logoutTs = Date.now();\n    authRecord.accessToken = '';\n    authRecord.refreshToken = '';\n    localStorage.setItem('mdds-auth-record', JSON.stringify(authRecord));\n  }\n  \n\n  setAdminInterface(isAdminInterface: boolean): void {\n    this.adminInterface = isAdminInterface;\n    localStorage.setItem('adminInterface', JSON.stringify(isAdminInterface));\n  }\n  \n  isAdminInterface(): boolean {\n    return this.adminInterface;\n  }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { Router, CanActivate, CanActivateChild, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { AuthenticationService } from './auth.service';\nimport { AUTHTICATION_LOGIN_PAGE_URI } from './tokens';\n\n@Injectable()\nexport class AuthGuard implements CanActivate, CanActivateChild {\n  constructor(\n    private router: Router,\n    private authService: AuthenticationService,\n    @Inject(AUTHTICATION_LOGIN_PAGE_URI) private loginPageUri: string) { }\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    if (this.authService.isAuthorized()) {\n      // logged in so return true\n      return true;\n    }\n\n    // not logged in so redirect to login page with the return url\n    this.authService.setInterruptedUrl(state.url);\n    this.router.navigate([this.loginPageUri]);\n    return false;\n  }\n  canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    return this.canActivate(route, state);\n  }\n}\n","import { Component, Inject } from '@angular/core';\nimport { AuthenticationService } from './auth.service';\nimport { AUTHTICATION_INTERFACES } from './tokens';\n\n@Component({\n    selector: 'app-auth',\n    templateUrl: 'auth.component.html'\n})\n\nexport class AuthenticationComponent {\n    adminInterface: boolean = false;\n    userIntEnabled: boolean = false;\n    adminIntEnabled: boolean = false;\n\n    constructor(\n        private authenticationService: AuthenticationService,\n        @Inject(AUTHTICATION_INTERFACES) private authenticationInterfaces: string\n        ) {\n      \n      let str = authenticationInterfaces.toLowerCase();\n      if (str.includes(\"user\") && str.includes(\"admin\") ) {//both interface. Check cached.\n        this.adminInterface = authenticationService.isAdminInterface();\n        this.userIntEnabled = true;\n        this.adminIntEnabled = true;\n      } else if (str.includes(\"admin\")) { //administrator only\n        this.authenticationService.setAdminInterface(true);\n        this.adminIntEnabled = true;\n      } else { //users only\n        this.authenticationService.setAdminInterface(false);\n        this.userIntEnabled = true;\n      }\n    }\n  \n    setAdminInterface(adminInterface: boolean): void {\n      this.adminInterface = adminInterface;\n      this.authenticationService.setAdminInterface(this.adminInterface);\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { first } from 'rxjs/operators';\nimport { AuthenticationService } from '../auth.service';\n\n@Component(\n    {templateUrl: 'login.component.html',\n     styleUrls: ['login.component.css']\n    })\nexport class LoginComponent implements OnInit {\n    loginForm: FormGroup;\n    loading = false;\n    submitted = false;\n    servererror = false;\n    serverText = '';\n    returnUrl: string;\n  \n    constructor(\n        private formBuilder: FormBuilder,\n        private route: ActivatedRoute,\n        private router: Router,\n        private authenticationService: AuthenticationService) { }\n\n    ngOnInit() {\n        this.loginForm = this.formBuilder.group({\n            username: ['', Validators.required],\n            password: ['', Validators.required]\n        });\n\n        // reset login status\n        this.authenticationService.logout();\n\n        // get return url from route parameters or default to '/'\n        // this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\n    }\n\n    // convenience getter for easy access to form fields\n    get f() { return this.loginForm.controls; }\n\n    onSubmit() {\n        this.submitted = true;\n\n        // stop here if form is invalid\n        if (this.loginForm.invalid) {\n            return;\n        }\n        let returnUrl = this.authenticationService.getInterruptedUrl();\n        if (this.router.url === returnUrl) { returnUrl = '/'; } // home page\n\n        this.loading = true;\n        this.authenticationService.login(this.f.username.value, this.f.password.value)\n            .pipe(first())\n            .subscribe(\n                data => {\n                    this.servererror = false;\n                    this.router.navigate([returnUrl]);\n                    this.loading = false;\n                },\n                error => {\n                    // this.alertService.error(error);\n                    this.servererror = true;\n                    this.serverText = error.error.error;\n                    this.loading = false;\n                });\n    }\n\n    cancel() {\n      const routedFromUrl = this.authenticationService.getRoutedFromUrl();\n      this.router.navigate([routedFromUrl]);\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { first } from 'rxjs/operators';\n\nimport { AuthenticationService } from '../auth.service';\n\nconst validatePasswords = function(form) {\n    const passwordConf = form.controls.password_conf.value;\n    const password = form.controls.password.value;\n\n    if (passwordConf === password) {\n        return null;\n    } else {\n        form.controls.password_conf.setErrors({'passwordNotSame': true});\n        return null;\n    }\n};\n\n@Component(\n    {templateUrl: 'register.component.html',\n     styleUrls: ['register.component.css']\n    })\nexport class RegisterComponent implements OnInit {\n    registerForm: FormGroup;\n    loading = false;\n    submitted = false;\n    servererror = false;\n    serverText = '';\n\n    constructor(\n        private formBuilder: FormBuilder,\n        private router: Router,\n        private route: ActivatedRoute,\n        private authenticationService: AuthenticationService) { }\n\n\n    ngOnInit() {\n        this.registerForm = this.formBuilder.group({\n            username: ['', Validators.required],\n            password: ['', [Validators.required, Validators.minLength(6)]],\n            password_conf: ['', [Validators.required, Validators.minLength(6)]]\n        }, {validator: validatePasswords });\n    }\n\n    // convenience getter for easy access to form fields\n    get f() { return this.registerForm.controls; }\n\n    onSubmit() {\n        this.submitted = true;\n\n        // stop here if form is invalid\n        if (this.registerForm.invalid) {\n            return;\n        }\n\n        this.loading = true;\n        this.authenticationService.register(this.registerForm.value)\n            .pipe(first())\n            .subscribe(\n                data => {\n                    // this.alertService.success('Registration successful', true);\n                    this.router.navigate(['../login'], {relativeTo: this.route, });\n                    this.servererror = false;\n                },\n                error => {\n                    // this.alertService.error(error);\n                    // alert(\"Error login\");\n                    this.servererror = true;\n                    this.serverText = error.error.error;\n                    this.loading = false;\n                });\n    }\n    cancel() {\n      const routedFromUrl = this.authenticationService.getRoutedFromUrl();\n      this.router.navigate([routedFromUrl]);\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AuthenticationComponent } from './auth.component';\nimport { LoginComponent } from './login';\nimport { RegisterComponent } from './register';\n\nconst routes: Routes = [\n  { path: 'auth', \n    component: AuthenticationComponent,\n    children: [ \n\n                { path: \"login\",  component: LoginComponent },\n                { path: 'register', component: RegisterComponent },\n\n                { path: '',  redirectTo: 'login', pathMatch: 'full' },\n                { path: '**', redirectTo: 'login' }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AuthRoutingModule { }","import { Injectable, Inject } from '@angular/core';\nimport {\n  HttpRequest,\n  HttpResponse,\n  HttpErrorResponse,\n  HttpHandler,\n  HttpEvent,\n  HttpInterceptor\n} from '@angular/common/http';\nimport { Router, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { Observable, BehaviorSubject, throwError, EMPTY } from 'rxjs';\nimport { tap, catchError, switchMap, filter, take } from 'rxjs/operators';\n\nimport { AuthenticationService } from './auth.service';\nimport { AUTHTICATION_LOGIN_PAGE_URI } from './tokens';\n\n@Injectable()\nexport class TokenInterceptor implements HttpInterceptor {\n  private refreshTokenInProgress = false;\n  // Refresh Token Subject tracks the current token, or is null if no token is currently\n  // available (e.g. refresh pending).\n  private refreshTokenSubject: BehaviorSubject<any> = new BehaviorSubject<any>(null);\n\n  constructor(\n    private router: Router,\n    private authService: AuthenticationService,\n    @Inject(AUTHTICATION_LOGIN_PAGE_URI) private loginPageUri: string\n    ) {}\n\n  addAuthHeader(request) {\n    if (this.authService.isAuthorized()) {\n      request = request.clone({\n        setHeaders: {\n          Authorization: `Bearer ${this.authService.getAccessToken()}`\n        }\n      });\n    }\n    return request;\n  }\n\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    return next.handle(this.addAuthHeader(request))\n      .pipe(\n        /*\n        tap((event: HttpEvent<any>) => {\n\t        if (event instanceof HttpResponse) {\n\t          ;\n\t        }\n\t      }, (err: any) => {\n            if (err instanceof HttpErrorResponse) {\n              if (err.status === 401) {\n                this.authService.setInterruptedUrl(this.router.url);\n                this.router.navigate([this.loginPageUri]);\n              }\n            }\n        })\n        */\n        catchError((error) => {\n          if (error instanceof HttpErrorResponse && error.status === 401) {\n            if (this.refreshTokenInProgress && !this.authService.verifyTokenRequest(request.url)) {\n                // If refreshTokenInProgress is true, we will wait until refreshTokenSubject has a non-null value\n                // â which means the new token is ready and we can retry the request again\n                return this.refreshTokenSubject.pipe(\n                    filter(result => result !== null),\n                    take(1),\n                    switchMap(() => next.handle(this.addAuthHeader(request)))\n                );\n\n            } else {\n                this.refreshTokenInProgress = true;\n                // Set the refreshTokenSubject to null so that subsequent API calls will wait until the new token has been retrieved\n                this.refreshTokenSubject.next(null);\n                return this.authService.refreshToken().pipe(\n                        switchMap((data) => {\n                            this.refreshTokenInProgress = false;\n                            this.refreshTokenSubject.next(data);\n                            return next.handle(this.addAuthHeader(request));\n                        }),\n                        catchError((err) => {\n                            // looks like this part will not hit\n                            this.refreshTokenInProgress = false;\n                            this.authService.setInterruptedUrl(this.router.url);\n                            this.router.navigate([this.loginPageUri]);\n                            return EMPTY;\n                        })\n                );\n            }\n          }\n          if (this.authService.verifyTokenRequest(request.url)) {\n            // refreshToken failed. Go to login page.\n            this.refreshTokenInProgress = false;\n            this.authService.setInterruptedUrl(this.router.url);\n            this.router.navigate([this.loginPageUri]);\n          }\n          return throwError(error);\n        })\n    );\n  }\n}\n","import { Component, OnInit, Inject  } from '@angular/core';\nimport { Router, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { AuthenticationService } from '../auth.service';\n\nimport { AUTHTICATION_LOGIN_PAGE_URI } from '../tokens';\n\n@Component({\n    selector: 'app-auth-icon',\n    templateUrl: 'auth-icon.component.html',\n    styleUrls: ['auth-icon.component.css']\n})\nexport class AuthIconComponent implements OnInit {\n  public popup = false;\n  public popupStyle: any = {};\n  public userName = 'Please login';\n  public userNameShort = 'Please login';\n\n  constructor(\n    private router: Router,\n    private authService: AuthenticationService,\n    @Inject(AUTHTICATION_LOGIN_PAGE_URI) private loginPageUri: string) { }\n\n  ngOnInit() {\n    this.isAuthorized();\n  }\n\n  public toggle(event) {\n    if (!this.popup) {\n      const right = (window.innerWidth - event.x) - 2;\n      const top = event.y + 15;\n\n      this.popupStyle = {\n        'right': right.toString() + 'px',\n        'top': top.toString() + 'px',\n      };\n    }\n    this.popup = !this.popup;\n  }\n\n  public closePopup() {\n    this.popup = false;\n  }\n\n  public isAuthorized() {\n    const name = this.authService.getUserName();\n    const isAuth = this.authService.isAuthorized();\n    if (name) {\n        this.userName = name;\n        if (isAuth) {\n          if (name.length > 12) {\n            this.userNameShort = name.substring(0, 10) + '...';\n          } else {\n            this.userNameShort = name.substring(0, 13);\n          }\n        } else {\n          this.userNameShort = 'Please login';\n        }\n    }\n    return isAuth;\n  }\n\n  public login() {\n    // not logged in so redirect to login page with the return url\n    const state: RouterStateSnapshot = this.router.routerState.snapshot;\n    this.authService.setInterruptedUrl(state.url);\n    this.popup = false;\n    this.router.navigate([this.loginPageUri]);\n  }\n\n  public logout() {\n    // not logged in so redirect to login page with the return url\n    this.authService.logout();\n    this.popup = false;\n    this.router.navigated = false; // refresh current page;\n    this.router.navigate(['/']); // home page\n  }\n}\n","import { Directive, EventEmitter, ElementRef, HostListener, Output } from '@angular/core';\n \n@Directive({ selector: '[clickElsewhere]' })\nexport class ClickElsewhereDirective {\n  @Output() clickElsewhere = new EventEmitter<MouseEvent>(); \n \n  constructor(private elementRef: ElementRef) {}\n \n  @HostListener('document:click', ['$event'])\n  public onDocumentClick(event: MouseEvent): void {\n    const targetElement = event.target as HTMLElement;\n \n      // Check if the click was outside the element\n      if (targetElement && !this.elementRef.nativeElement.contains(targetElement)) {\n \n         this.clickElsewhere.emit(event);\n      }\n  }\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\n\nimport { AuthRoutingModule } from './auth-routing.module';\nimport { AuthenticationService } from './auth.service';\nimport { AUTHTICATION_LOGIN_PAGE_URI, AUTHTICATION_SERVER_ROOT_URI } from './tokens';\nimport { TokenInterceptor } from './auth.interceptor';\nimport { AuthenticationComponent } from './auth.component';\nimport { LoginComponent } from './login';\nimport { RegisterComponent } from './register';\nimport { AuthGuard } from './auth.guard';\nimport { AuthIconComponent } from './auth-icon/auth-icon.component';\nimport { ClickElsewhereDirective } from './auth-icon/click-elsewhere.directive';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        HttpClientModule,\n\n        AuthRoutingModule\n    ],\n    declarations: [\n        AuthenticationComponent,\n        LoginComponent,\n        RegisterComponent,\n        AuthIconComponent,\n\n        ClickElsewhereDirective\n    ],\n    exports: [\n        AuthIconComponent\n    ],\n    providers: [\n        AuthenticationService,\n        AuthGuard,\n        {\n            provide: HTTP_INTERCEPTORS,\n            useClass: TokenInterceptor,\n            multi: true\n        },\n    ]\n})\nexport class AuthenticationModule { }\n"],"names":["InjectionToken","router","http","NavigationEnd","map","catchError","HttpParams","Injectable","Inject","Router","HttpClient","Component","Validators","first","FormBuilder","ActivatedRoute","NgModule","RouterModule","BehaviorSubject","HttpErrorResponse","filter","take","switchMap","EMPTY","throwError","EventEmitter","Directive","ElementRef","Output","HostListener","CommonModule","FormsModule","ReactiveFormsModule","HttpClientModule","HTTP_INTERCEPTORS"],"mappings":"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"}
