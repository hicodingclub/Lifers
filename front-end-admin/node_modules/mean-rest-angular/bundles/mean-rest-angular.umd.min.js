!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("rxjs/operators"),require("@angular/common/http"),require("@angular/forms"),require("@angular/core")):"function"==typeof define&&define.amd?define("mean-rest-angular",["exports","rxjs","rxjs/operators","@angular/common/http","@angular/forms","@angular/core"],t):t(e["mean-rest-angular"]={},e.rxjs,e.rxjs.operators,e.ng.common.http,e.ng.forms,e.ng.core)}(this,function(e,r,n,o,t,s){"use strict";function I(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)a.push(i.value)}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=o["return"])&&r.call(o)}finally{if(n)throw n.error}}return a}var i=function E(){},a=function(){function e(e){this.config=e}return e.prototype.show=function(){var r=this.config;$("#meanExpressAngularModal").length||($("<style type='text/css' id='meanExpressAngularModalCss'>\n.meanExpressAngularModal {\n    display: none; \n    position: fixed; \n    z-index: 100; \n    padding-top: 100px; \n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%; \n    overflow: auto; \n    background-color: rgb(0,0,0);\n    background-color: rgba(0,0,0,0.4);\n}\n\n.meanExpressAngularModal.show {\n    display: block; \n}\n\n.meanExpressAngularModal-content {\n    position: relative;\n    background-color: #fefefe;\n    margin: auto;\n    padding: 0;\n    border: 1px solid #888;\n    width: 50%;\n    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\n    -webkit-animation-name: modalanimatetop;\n    -webkit-animation-duration: 0.4s;\n    animation-name: modalanimatetop;\n    animation-duration: 0.4s\n}\n\n@-webkit-keyframes modalanimatetop {\n    from {top:-300px; opacity:0} \n    to {top:0; opacity:1}\n}\n\n@keyframes modalanimatetop {\n    from {top:-300px; opacity:0}\n    to {top:0; opacity:1}\n}\n</style>").appendTo("head"),$("body").append('\n<div class="meanExpressAngularModal" id="meanExpressAngularModal">\n  <div class="meanExpressAngularModal-content">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h5 class="modal-title" id="meanExpressAngularModalTitle">Modal title from function</h5>\n        <button type="button" class="close" id="meanExpressAngularModalClose" aria-label="Close" >\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body" id="meanExpressAngularModalBody">\n        Hello\n      </div>\n      <div class="modal-footer" id="meanExpressAngularModalFooter">\n      </div>\n    </div>\n  </div>\n</div> \n')),$("#meanExpressAngularModalFooter").empty();for(var e=0;e<r.buttons.length;e++){var t='<button type="button" class="btn btn-primary" id="meanExpressAngularModalBtn'+e+'" >'+r.buttons[e]+"</button>";$("#meanExpressAngularModalFooter").append(t),$("#meanExpressAngularModalBtn"+e).click(function(e){$("#meanExpressAngularModal").removeClass("show");var t=parseInt(e.target.id.replace("meanExpressAngularModalBtn",""));r.callBack(r.returns[t])})}$("#meanExpressAngularModalTitle").empty(),$("#meanExpressAngularModalTitle").append(r.title),$("#meanExpressAngularModalBody").empty(),$("#meanExpressAngularModalBody").append(r.content),$("#meanExpressAngularModalClose").click(function(){$("#meanExpressAngularModal").removeClass("show"),r.callBack(!1)}),$("#meanExpressAngularModal").addClass("show")},e.prototype.hide=function(){$("#meanExpressAngularModal").removeClass("show")},e}(),l=function M(){},d=function(){function e(e){this.config=e}return e.prototype.getHtml=function(){var e="meanExpressAngularSnackBar"+Date.now();return{id:e,html:'\n<div class="meanExpressAngularSnackBar" id="'+e+'">\n\n</div>\n'}},e.prototype.show=function(){$("#meanExpressAngularSnackBarCss").length||$("<style type='text/css' id='meanExpressAngularSnackBarCss'>\n.meanExpressAngularSnackBar {\n    visibility: hidden;\n    min-width: 250px;\n    margin-left: -125px;\n    background-color: #333;\n    color: #fff;\n    text-align: center; \n    border-radius: 2px; \n    padding: 16px; \n    position: fixed;\n    z-index: 1;\n    left: 50%;\n    bottom: 30px;\n}\n\n.meanExpressAngularSnackBar.show {\n    visibility: visible;\n\n    -webkit-animation: snackbarfadein 0.5s, snackbarfadeout 0.5s 2.5s;\n    animation: snackbarfadein 0.5s, snackbarfadeout 0.5s 2.5s;\n}\n\n@-webkit-keyframes snackbarfadein {\n    from {bottom: 0; opacity: 0;} \n    to {bottom: 30px; opacity: 1;}\n}\n\n@keyframes snackbarfadein {\n    from {bottom: 0; opacity: 0;}\n    to {bottom: 30px; opacity: 1;}\n}\n\n@-webkit-keyframes snackbarfadeout {\n    from {bottom: 30px; opacity: 1;} \n    to {bottom: 0; opacity: 0;}\n}\n\n@keyframes snackbarfadeout {\n    from {bottom: 30px; opacity: 1;}\n    to {bottom: 0; opacity: 0;}\n}\n</style>").appendTo("head");var e=this.getHtml(),t="#"+e.id;$("body").append(e.html),$(t).append(this.config.content),$(t).addClass("show"),setTimeout(function(){$(t).removeClass("show"),setTimeout(function(){$(t).remove()},500)},3e3)},e}(),c=function k(){},u=function(){function e(e){this.config=e}return e.prototype.getHtml=function(){var e="meanExpressAngularError"+Date.now();return{id:e,html:'\n<div class="alert alert-danger fade in alert-dismissible meanExpressAngularError"\n    id="'+e+'">\n <button type="button" class="close" aria-label="Close" id="button'+e+'">\n    <span aria-hidden="true" style="font-size:20px">Ã—</span>\n  </button>\n  <div>\n    <strong>Error!</strong>\n  </div>\n  <div id="content'+e+'">\n  </div>\n  <a id="link'+e+'" class="meanExpressAngularErrorMoreLink" href="." >Show more details...\n  </a>\n  <div id="more'+e+'" class="meanExpressAngularErrorMore">\n  </div>\n</div>\n'}},e.prototype.show=function(){$("#meanExpressAngularErrorCss").length||$("<style type='text/css' id='meanExpressAngularErrorCss'>\n.meanExpressAngularError {\n    visibility: hidden; \n    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);\n    min-width: 250px; \n    max-width: 60%;\n    left: 50%;\n    top: 20%;\n    transform: translate(-50%, 0);\n    position: fixed; \n    z-index: 10; \n}\n.meanExpressAngularError.show {\n    visibility: visible; \n}\n\n.meanExpressAngularErrorMoreLink {\n    display: none;\n}\n.meanExpressAngularErrorMoreLink.show {\n    display: block;\n}\n.meanExpressAngularErrorMore {\n    display: none;\n    font-size: 0.75rem;\n    font-color: black;\n    background-color: gray;\n}\n.meanExpressAngularErrorMore.show {\n    display: block;\n}\n</style>").appendTo("head");var e=this.getHtml(),t="#"+e.id,r="#content"+e.id,i="#more"+e.id,n="#link"+e.id,o="#button"+e.id;$("body").append(e.html),$(r).append(this.config.content),this.config.more&&($(i).append(this.config.more),$(n).addClass("show"),$(n).click(function(e){e.preventDefault(),$(i).addClass("show")})),$(o).click(function(e){$(t).removeClass("show")}),$(t).addClass("show")},e}(),p=function C(){},h=function(){function e(e,t){this.http=e,this.serviceUrl=t,this.storage={}}return e.prototype.getFromStorage=function(e){return this.storage[e]},e.prototype.putToStorage=function(e,t){this.storage[e]=t},e.prototype.errorResponseHandler=function(e){var t=new p;return e.error instanceof ErrorEvent?(t.status=0,t.clientErrorMsg=e.error.message):(t.status=e.status,t.serverError=e.error),r.throwError(t)},e.prototype.formatDetail=function(e){return e},e.prototype.formatList=function(e){return e},e.prototype.getList=function(e,t,r){var i={params:(new o.HttpParams).set("__page",e.toString()).set("__per_page",t.toString()),headers:new o.HttpHeaders({Accept:"application/json"})};return r?(i.params=i.params.set("action","Search"),this.http.post(this.serviceUrl+"mddsaction/get",r,i).pipe(n.catchError(this.errorResponseHandler))):this.http.get(this.serviceUrl,i).pipe(n.map(this.formatList),n.catchError(this.errorResponseHandler))},e.prototype.getListWithCondition=function(e,t){var r={params:(new o.HttpParams).set("__page",e.toString()).set("__per_page",t.toString()),headers:new o.HttpHeaders({Accept:"application/json"})};return this.http.get(this.serviceUrl,r).pipe(n.map(this.formatList),n.catchError(this.errorResponseHandler))},e.prototype.getDetailForAction=function(e,t){var r={headers:new o.HttpHeaders({Accept:"application/json"})},i=this.serviceUrl;return t&&(r.params=(new o.HttpParams).set("action",t),"edit"==t&&(t="post"),i=i+"mddsaction/"+t+"/"),this.http.get(i+e,r).pipe(n.map(this.formatDetail),n.catchError(this.errorResponseHandler))},e.prototype.getDetail=function(e){return this.getDetailForAction(e,null)},e.prototype.deleteOne=function(e){return this.http["delete"](this.serviceUrl+e).pipe(n.catchError(this.errorResponseHandler))},e.prototype.deleteManyByIds=function(e){var t={headers:new o.HttpHeaders({"Content-Type":"application/json"}),params:(new o.HttpParams).set("action","DeleteManyByIds")};return this.http.post(this.serviceUrl+"mddsaction/delete",e,t).pipe(n.catchError(this.errorResponseHandler))},e.prototype.createOne=function(e){var t={headers:new o.HttpHeaders({"Content-Type":"application/json"})};return this.http.put(this.serviceUrl,e,t).pipe(n.map(this.formatDetail),n.catchError(this.errorResponseHandler))},e.prototype.updateOne=function(e,t){var r={headers:new o.HttpHeaders({"Content-Type":"application/json"})};return this.http.post(this.serviceUrl+e,t,r).pipe(n.catchError(this.errorResponseHandler))},e}(),f=function(){function e(){this.storage={}}return e.prototype.getFromStorage=function(e){return this.storage[e]},e.prototype.putToStorage=function(e,t){this.storage[e]=t},e.decorators=[{type:s.Injectable}],e.ctorParameters=function(){return[]},e}(),m=function(){function o(){}return o.clone=function(e){var t;if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(e instanceof Array){t=[];for(var r=0,i=e.length;r<i;r++)t[r]=o.clone(e[r]);return t}if(e instanceof Object){for(var n in t={},e)e.hasOwnProperty(n)&&(t[n]=o.clone(e[n]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")},o}(),v={LIST:0,DETAIL:1,EDIT:2};v[v.LIST]="LIST",v[v.DETAIL]="DETAIL",v[v.EDIT]="EDIT";var g=function(){function e(e,t,r,i,n,o,a){this.service=e,this.injector=t,this.router=r,this.route=i,this.location=n,this.view=o,this.itemCamelName=a,this.objectKeys=Object.keys,this.storage={},this.list=[],this.majorUi=!0,this.eventEmitter=new s.EventEmitter,this.page=1,this.per_page=25,this.total_count=0,this.total_pages=0,this.pages=[],this.left_more=!1,this.right_more=!1,this.checkAll=!1,this.checkedItem=[],this.detail={},this._detail={},this._extra={},this.subEdit=!1,this.enums={},this.stringFields=[],this.referenceFields=[],this.referenceFieldsMap={},this.dateFields=[],this.indexFields=[],this.multiSelectionFields=[],this.arrayFields=[],this.mapFields=[],this.dateFormat="MM/DD/YYYY",this.timeFormat="hh:mm:ss",this.hiddenFields=[],this.refreshing=!1,this.clickedId=null,this.selectedId=null,this.moreSearchOpened=!1,this.textEditorMap={},this.isAdding=!1,this.ItemCamelName=a.charAt(0).toUpperCase()+a.substr(1),this.itemName=a.toLowerCase(),this.parentItem=this.getParentRouteItem(),this.commonService=t.get(f)}return e.prototype.onServiceError=function(e){var t,r;if(this.refreshing=!1,e.clientErrorMsg)t=e.clientErrorMsg;else if(e.serverError){if(401==e.status)return;t="object"==typeof e.serverError?e.status+": "+JSON.stringify(e.serverError):e.status+": "+e.serverError}console.info("Error: "+t),t||(t="Unknown error."),80<t.length&&(t=(r=t).substring(0,80)+"..."),new u({content:t,more:r}).show()},e.prototype.populatePages=function(){this.pages=[];var e,t;this.total_pages<=9?(e=1,t=this.total_pages,this.left_more=!1,this.right_more=!1):this.page-1<4?(e=1,t=8,this.left_more=!1,this.right_more=!0):this.total_pages-this.page<4?(t=this.total_pages,e=this.total_pages-9+1+1,this.left_more=!0,this.right_more=!1):(e=this.page-4+1,t=this.page+4-1,this.left_more=!0,this.right_more=!0);for(var r=e;r<=t;r++)this.pages.push(r)},e.prototype.getKey=function(e){return this.router.url.split(";")[0].split("?")[0]+":"+e},e.prototype.putToStorage=function(e,t){this.majorUi?this.commonService.putToStorage(this.getKey(e),t):this.storage[e]=t},e.prototype.getFromStorage=function(e){return this.majorUi?this.commonService.getFromStorage(this.getKey(e)):this.storage[e]},e.prototype.routeToPage=function(e){this.putToStorage("page",e),this.populateList()},e.prototype.onNextPage=function(){this.page>=this.total_pages||this.routeToPage(this.page+1)},e.prototype.onPreviousPage=function(){this.page<=1||this.routeToPage(this.page-1)},e.prototype.onGotoPage=function(e){e>this.total_pages||e<1||this.routeToPage(e)},e.prototype.goBack=function(){this.location.back()},e.prototype.stringify=function(e){var t,r,i="";try{for(var n=I(this.indexFields),o=n.next();!o.done;o=n.next()){var a=o.value;e[a]&&"object"!=typeof e[a]&&(i+=" "+e[a])}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(t)throw t.error}}if(!i)for(var s in e)"_id"!==s&&e[s]&&"object"!=typeof e[s]&&(i+=" "+e[s]);return i||(i=e._id?e._id:"..."),30<(i=i.replace(/^\s+|\s+$/g,"")).length&&(i=i.substr(0,27)+"..."),i},e.prototype.formatReferenceField=function(e,t){var r;if("string"==typeof e){var i=this.commonService.getFromStorage(e);e=i&&"object"==typeof i?i:{_id:r=e}}else if(e&&"object"==typeof e){r=e._id;var n="";for(var o in e)"_id"!=o&&(n+=" "+e[o]);20<=(n=n.replace(/^\s+|\s+$/g,"")).length&&(n=n.substring(0,20)+"..."),e={_id:r,value:n||t}}else e={_id:r,value:void 0};return e},e.prototype.formatReference=function(e){var t,r;try{for(var i=I(this.referenceFields),n=i.next();!n.done;n=i.next()){var o=n.value;e[o]=this.formatReferenceField(e[o],o)}}catch(a){t={error:a}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}return e},e.prototype.deFormatReference=function(e){var t,r;try{for(var i=I(this.referenceFields),n=i.next();!n.done;n=i.next()){var o=n.value;if("object"!=typeof e[o])delete e[o];else{var a=e[o]._id;"string"!=typeof a?delete e[o]:e[o]=a}}}catch(s){t={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}return e},e.prototype.clearFieldReference=function(e){for(var t in e)e[t]=undefined;return e},e.prototype.isDefinedFieldReference=function(e){return"_id"in e&&"string"==typeof e._id},e.prototype.formatDateField=function(e){var t,r,i,n,o,a,s,l,d,c,u,p=this.dateFormat,h=this.timeFormat,f=new Date(e);t=f.getDate(),r=f.getMonth()+1;var m=(i=f.getFullYear()).toString().slice(2);n=f.getHours(),o=f.getMinutes(),a=f.getSeconds(),s=t<10?"0"+t:t.toString(),l=r<10?"0"+r:r.toString(),d=n<10?"0"+n:n.toString(),c=o<10?"0"+o:o.toString(),u=a<10?"0"+a:a.toString();var y=p.replace(/yyyy/gi,i.toString()).replace(/yy/gi,m.toString()).replace(/MM/g,l.toString()).replace(/dd/gi,s.toString());h.replace(/hh/gi,d.toString()).replace(/mm/g,c.toString()).replace(/ss/gi,u.toString());return{date:{day:t,month:r,year:i},value:y,from:undefined,to:undefined,pop:!1,time:{hour:n,minute:o,second:a},t_value:y,t_from:undefined,t_to:undefined,t_pop:!1}},e.prototype.formatDate=function(e){var t,r;try{for(var i=I(this.dateFields),n=i.next();!n.done;n=i.next()){var o=n.value;"string"!=typeof e[o]?e[o]={date:undefined,value:undefined,from:undefined,to:undefined,pop:!1}:e[o]=this.formatDateField(e[o])}}catch(a){t={error:a}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}return e},e.prototype.deFormatDateField=function(e){var t,r,i;return i=e.year,r=e.month-1,t=e.day,"number"!=typeof i||"number"!=typeof r||"number"!=typeof t?null:new Date(i,r,t,0,0,0,0).toISOString()},e.prototype.deFormatDate=function(e){var t,r;try{for(var i=I(this.dateFields),n=i.next();!n.done;n=i.next()){var o=n.value;if("object"!=typeof e[o])delete e[o];else if(e[o].date){var a=this.deFormatDateField(e[o].date);a?e[o]=a:delete e[o]}else delete e[o]}}catch(s){t={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}return e},e.prototype.clearFieldDate=function(e){for(var t in e)e[t]=undefined;return e},e.prototype.isDefinedFieldDate=function(e){if("object"==typeof e){if("object"==typeof e.date)return!0;if("object"==typeof e.from)return!0;if("object"==typeof e.to)return!0}return!1},e.prototype.formatArrayMultiSelectionField=function(e,t){var r,i,n,o,a={},s="";try{for(var l=I(t),d=l.next();!d.done;d=l.next()){a[d.value]=!1}}catch(p){r={error:p}}finally{try{d&&!d.done&&(i=l["return"])&&i.call(l)}finally{if(r)throw r.error}}if(Array.isArray(e)){try{for(var c=I(e),u=c.next();!u.done;u=c.next()){a[u.value]=!0}}catch(h){n={error:h}}finally{try{u&&!u.done&&(o=c["return"])&&o.call(c)}finally{if(n)throw n.error}}s=e.join(" | ")}return{selection:a,value:s}},e.prototype.formatArrayMultiSelection=function(e){var t,r;try{for(var i=I(this.multiSelectionFields),n=i.next();!n.done;n=i.next()){var o=n.value;e[o]=this.formatArrayMultiSelectionField(e[o],this.enums[o])}}catch(a){t={error:a}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}return e},e.prototype.deFormatArrayMultiSelection=function(e){var t,r,i,n;try{for(var o=I(this.multiSelectionFields),a=o.next();!a.done;a=o.next()){var s=a.value;if("object"!=typeof e[s])delete e[s];else if(e[s].selection){var l=[];try{for(var d=I(this.enums[s]),c=d.next();!c.done;c=d.next()){var u=c.value;e[s].selection[u]&&l.push(u)}}catch(p){i={error:p}}finally{try{c&&!c.done&&(n=d["return"])&&n.call(d)}finally{if(i)throw i.error}}0<l.length?e[s]=l:delete e[s]}else delete e[s]}}catch(h){t={error:h}}finally{try{a&&!a.done&&(r=o["return"])&&r.call(o)}finally{if(t)throw t.error}}return e},e.prototype.clearFieldArrayMultiSelection=function(e){if(!e.selection)return e;for(var t in e.selection)e.selection[t]=!1;return e},e.prototype.isDefinedFieldArrayMultiSelection=function(t){return"selection"in t&&"object"==typeof t.selection&&Object.keys(t.selection).some(function(e){return t.selection[e]})},e.prototype.multiselectionSelected=function(e){return!(!this.detail[e]||"object"!=typeof this.detail[e].selection)&&this.isDefinedFieldArrayMultiSelection(this.detail[e])},e.prototype.formatMapField=function(e,t){var r={},i=[];if("object"==typeof e)for(var n in r=e)"SchemaString"===t&&i.push(n+"("+e[n]+")");return{selection:r,value:(i=i.filter(function(e){return!!e})).join(" | "),keys:[]}},e.prototype.formatMapFields=function(e){var t,r;try{for(var i=I(this.mapFields),n=i.next();!n.done;n=i.next()){var o=n.value;e[o[0]]=this.formatMapField(e[o[0]],o[1])}}catch(a){t={error:a}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}return e},e.prototype.deFormatMapFields=function(e){var t,r;try{for(var i=I(this.mapFields),n=i.next();!n.done;n=i.next()){var o=n.value,a=o[0];o[1];if("object"!=typeof e[a])delete e[a];else if(e[a].selection){var s=e[a].selection;for(var l in e[a].selection);0<Object.keys(s).length?e[a]=s:delete e[a]}else delete e[a]}}catch(d){t={error:d}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}return e},e.prototype.clearFieldMap=function(e){return e.selection&&(e.selection={},e.value=undefined),e},e.prototype.isDefinedFieldMap=function(e){return"selection"in e&&"object"==typeof e.selection&&0<Object.keys(e.selection).length},e.prototype.mapSelected=function(e){return!(!this.detail[e]||"object"!=typeof this.detail[e].selection)&&this.isDefinedFieldMap(this.detail[e])},e.prototype.formatArrayField=function(e,t){var r,i,n=[],o=[];if(Array.isArray(e))try{for(var a=I(e),s=a.next();!s.done;s=a.next()){var l=s.value;if("ObjectId"===t){var d=this.formatReferenceField(l,"...");n.push(d),o.push(d.value)}else"SchemaString"===t&&(n.push(l),o.push(l))}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a["return"])&&i.call(a)}finally{if(r)throw r.error}}return{selection:n,value:(o=o.filter(function(e){return!!e})).join(" | ")}},e.prototype.formatArrayFields=function(e){var t,r;try{for(var i=I(this.arrayFields),n=i.next();!n.done;n=i.next()){var o=n.value;e[o[0]]=this.formatArrayField(e[o[0]],o[1])}}catch(a){t={error:a}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}return e},e.prototype.deFormatArrayFields=function(e){var t,r,i,n;try{for(var o=I(this.arrayFields),a=o.next();!a.done;a=o.next()){var s=a.value,l=s[0],d=s[1];if("object"!=typeof e[l])delete e[l];else if(e[l].selection){var c=[];try{for(var u=I(e[l].selection),p=u.next();!p.done;p=u.next()){var h=p.value;"ObjectId"===d?h&&h._id&&"string"==typeof h._id&&c.push(h._id):"SchemaString"===d&&h&&c.push(h)}}catch(f){i={error:f}}finally{try{p&&!p.done&&(n=u["return"])&&n.call(u)}finally{if(i)throw i.error}}0<c.length?e[l]=c:delete e[l]}else delete e[l]}}catch(m){t={error:m}}finally{try{a&&!a.done&&(r=o["return"])&&r.call(o)}finally{if(t)throw t.error}}return e},e.prototype.clearFieldArray=function(e){return e.selection&&(e.selection=[],e.value=undefined),e},e.prototype.isDefinedFieldArray=function(e){return!!("selection"in e&&Array.isArray(e.selection))&&0<e.selection.length},e.prototype.arraySelected=function(e){return!(!this.detail[e]||!Array.isArray(this.detail[e].selection))&&this.isDefinedFieldArray(this.detail[e])},e.prototype.formatDetail=function(e){return e=this.formatReference(e),e=this.formatDate(e),e=this.formatArrayMultiSelection(e),e=this.formatArrayFields(e),e=this.formatMapFields(e)},e.prototype.deFormatDetail=function(e){var t=m.clone(e);return t=this.deFormatReference(t),t=this.deFormatDate(t),t=this.deFormatArrayMultiSelection(t),t=this.deFormatArrayFields(t),t=this.deFormatMapFields(t)},e.prototype.populateDetail=function(e){return this.populateDetailForAction(e,null)},e.prototype.populateDetailForAction=function(e,r){var i=this;return this.service.getDetailForAction(e,r).subscribe(function(e){var t=m.clone(e);if(e._id&&i.commonService.putToStorage(e._id,t),i.detail=i.formatDetail(e),i.extraFieldsUnload(),"edit"==r&&i.extraInfoPopulate(),i.refreshing){i.refreshing=!1;new d({content:"Detail refreshed"}).show()}i.eventEmitter.emit(i.detail)},this.onServiceError),this.eventEmitter},e.prototype.populateDetailFromCopy=function(e){var t=this;this.service.getDetail(e).subscribe(function(e){t.detail=t.formatDetail(e),delete t.detail._id,t.extraFieldsUnload(),t.extraInfoPopulate()},this.onServiceError)},e.prototype.extraInfoPopulate=function(){var e,t,r=function(s){var e=s[0],t=s[2],l=[];if("ObjectId"==t){var r=s[3],d="key-id-"+r,i=n.injector.get(s[4]),c=n.detail[r]?n.detail[r]._id:undefined;if(!c)return"continue";var u=n.detail[e];if(u[d]==c)return"continue";i.getDetail(c).subscribe(function(e){var t,r;if(Array.isArray(e[s[5]])&&(l=e[s[5]],u.keys=l,u[d]=c,u.selection))try{for(var i=I(l),n=i.next();!n.done;n=i.next()){var o=n.value;o in u.selection||(u.selection[o]="")}}catch(a){t={error:a}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}},n.onServiceError)}},n=this;try{for(var i=I(this.mapFields),o=i.next();!o.done;o=i.next()){r(o.value)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=i["return"])&&t.call(i)}finally{if(e)throw e.error}}},e.prototype.equalTwoSearchContextArrays=function(e,t){if(e||(e=[]),t||(t=[]),0==e.length&&0==t.length)return!0;function r(e,t){var r=JSON.stringify(e),i=JSON.stringify(t);return r<i?-1:i<r?1:0}return e=e.sort(r),t=t.sort(r),JSON.stringify(e)==JSON.stringify(t)},e.prototype.processSearchContext=function(){var e,t,r,i,n,o;this.moreSearchOpened=!1;var a=this.detail;try{for(var s=I(this.stringFields),l=s.next();!l.done;l=s.next()){var d=l.value;a[d]=this.searchText}}catch(k){e={error:k}}finally{try{l&&!l.done&&(t=s["return"])&&t.call(s)}finally{if(e)throw e.error}}var c=[],u=[];for(var p in a){if("string"==typeof a[p])(g={})[p]=a[p],c.push(g)}this.searchMoreDetail=[];var h=this.deFormatDetail(a),f=function(t){if(-1==m.stringFields.indexOf(t)){var e={},r=void 0;if(e[t]=h[t],m.multiSelectionFields.includes(t))e[t]={$in:h[t]},r=m.formatArrayMultiSelectionField(h[t],m.enums[t]).value;else if(m.arrayFields.some(function(e){return e[0]==t}))e[t]={$in:h[t]},r=a[t].value;else if(m.dateFields.includes(t)){r=m.formatDateField(h[t]).value}else r=m.referenceFields.includes(t)?r=a[t].value:a[t];m.searchMoreDetail.push([t,r]),u.push(e)}},m=this;for(var p in h)f(p);try{for(var y=I(this.dateFields),v=y.next();!v.done;v=y.next()){var g,x=v.value,b="";(g={})[x]={},"object"==typeof a[x]&&((a[x].from||a[x].to)&&(a[x].from&&(g[x].from=this.deFormatDateField(a[x].from),b+=this.formatDateField(g[x].from).value),b+=" ~ ",a[x].to&&(g[x].to=this.deFormatDateField(a[x].to),b+=this.formatDateField(g[x].to).value),this.searchMoreDetail.push([x,b]),u.push(g)))}}catch(C){r={error:C}}finally{try{v&&!v.done&&(i=y["return"])&&i.call(y)}finally{if(r)throw r.error}}var F={$and:[{$or:c},{$and:u}]},S=this.getFromStorage("searchContext");if(S&&S.$and){var w=void 0,A=void 0;try{for(var D=I(S.$and),E=D.next();!E.done;E=D.next()){var M=E.value;"$and"in M?A=M.$and:"$or"in M&&(w=M.$or)}}catch(_){n={error:_}}finally{try{E&&!E.done&&(o=D["return"])&&o.call(D)}finally{if(n)throw n.error}}if(this.equalTwoSearchContextArrays(w,c)&&this.equalTwoSearchContextArrays(A,u))return}0==c.length&&0==u.length&&(F=null),this.putToStorage("searchContext",F),this.putToStorage("searchText",this.searchText),this.putToStorage("page",1),this.putToStorage("searchMoreDetail",this.searchMoreDetail),this.putToStorage("detail",this.detail)},e.prototype.searchList=function(){this.processSearchContext(),this.router.navigate([".",{}],{relativeTo:this.route}),this.putToStorage("page",1),this.populateList()},e.prototype.loadUIFromCache=function(){this.searchText=this.getFromStorage("searchText"),this.searchMoreDetail=this.getFromStorage("searchMoreDetail");var e=this.getFromStorage("detail");e&&(this.detail=e)},e.prototype.populateList=function(){var e,t,r=this,i=parseInt(this.route.snapshot.paramMap.get("page")),n=parseInt(this.getFromStorage("page"));return n?1==(e=n)?this.router.navigate([".",{}],{relativeTo:this.route}):this.router.navigate([".",{page:n}],{relativeTo:this.route}):e=i||1,t=this.getFromStorage("searchContext"),this.loadUIFromCache(),this.service.getList(e,this.per_page,t).subscribe(function(e){if(r.list=e.items.map(function(e){return r.formatDetail(e)}),r.page=e.page,r.per_page=e.per_page,r.total_count=e.total_count,r.total_pages=e.total_pages,r.populatePages(),r.checkedItem=Array.apply(null,Array(r.list.length)).map(Boolean.prototype.valueOf,!1),r.checkAll=!1,r.refreshing){r.refreshing=!1;new d({content:"List refreshed"}).show()}r.eventEmitter.emit(r.list)},this.onServiceError),this.eventEmitter},e.prototype.onRefresh=function(){this.view==v.LIST?(this.refreshing=!0,this.populateList()):this.view==v.DETAIL&&(this.refreshing=!0,this.id||(this.id=this.route.snapshot.paramMap.get("id")),this.id?this.populateDetail(this.id):console.error("Routing error for detail view... no id..."))},e.prototype.onCheckAllChange=function(){this.checkedItem=Array.apply(null,Array(this.list.length)).map(Boolean.prototype.valueOf,this.checkAll)},e.prototype.isItemSelected=function(){return this.checkedItem.some(function(e){return e})},e.prototype.onDeleteSelected=function(){var o=this,r=[];this.checkedItem.forEach(function(e,t){e&&r.push(o.list[t]._id)}),new a({title:"Delete Confirmation",content:"Are you sure you want to delete selected items from the system?",buttons:["Delete","Cancel"],returns:[!0,!1],callBack:function(e){e&&o.service.deleteManyByIds(r).subscribe(function(e){var t={content:o.ItemCamelName+" deleted"};if(new d(t).show(),o.view!=v.LIST)o.router.navigate(["../../list"],{relativeTo:o.route});else for(var r=o.checkedItem.length,i=0;i<r;i++){var n=r-1-i;o.checkedItem[n]&&(o.list.splice(n,1),o.checkedItem.splice(n,1),o.total_count-=1)}},o.onServiceError)}}).show()},e.prototype.onDelete=function(t,r){var i=this,e={title:"Delete Confirmation",content:"Are you sure you want to delete this "+this.itemCamelName+" from the system?",buttons:["Delete","Cancel"],returns:[!0,!1],callBack:function(e){e&&i.service.deleteOne(t).subscribe(function(e){var t={content:i.ItemCamelName+" deleted"};new d(t).show(),i.view!=v.LIST?i.router.navigate(["../../list"],{relativeTo:i.route}):null!=r&&i.list&&(i.list.splice(r,1),i.checkedItem.splice(r,1),i.total_count-=1)},i.onServiceError)}};new a(e).show()},e.prototype.onSubmit=function(){var i=this;this.extraFieldsLoad()&&(this._detail=this.deFormatDetail(this.detail),this.id?this.service.updateOne(this.id,this._detail).subscribe(function(e){var t={content:i.ItemCamelName+" updated."};new d(t).show(),i.router.navigate(["../../detail",i.id],{relativeTo:i.route})},this.onServiceError):this.service.createOne(this._detail).subscribe(function(e){var t=i.subEdit?" added":" created.",r={content:i.ItemCamelName+t};new d(r).show(),i.id=e._id,i._detail=e,i.subEdit?i.done.emit(!0):i.router.navigate(["../detail",i.id],{relativeTo:i.route})},this.onServiceError))},e.prototype.editCancel=function(){this.subEdit?this.done.emit(!1):this.goBack()},e.prototype.onDisplayRefClicked=function(e,t,r){var i,n,o=this.getRefFromField(e),a=t;if(a&&a._id){if(this.list)try{for(var s=I(this.list),l=s.next();!l.done;l=s.next()){var d=l.value;d[e]==a&&(this.clickedId=d._id)}}catch(c){i={error:c}}finally{try{l&&!l.done&&(n=s["return"])&&n.call(s)}finally{if(i)throw i.error}}this.router.navigate([o,"detail",a._id],{relativeTo:this.getParentActivatedRouter()})}r&&r.stopPropagation()},e.prototype.onDetailLinkClicked=function(e){this.clickedId=e,this.router.navigate([this.itemName,"detail",e],{relativeTo:this.getParentActivatedRouter()})},e.prototype.getRefFromField=function(e){return this.referenceFieldsMap[e]},e.prototype.clearValueFromDetail=function(t){this.detail.hasOwnProperty(t)&&"undefined"!=typeof this.detail[t]&&("object"==typeof this.detail[t]?(this.multiSelectionFields.includes(t)?this.detail[t]=this.clearFieldArrayMultiSelection(this.detail[t]):this.arrayFields.some(function(e){return e[0]==t})?this.detail[t]=this.clearFieldArray(this.detail[t]):this.mapFields.some(function(e){return e[0]==t})?this.detail[t]=this.clearFieldMap(this.detail[t]):this.dateFields.includes(t)?this.detail[t]=this.clearFieldDate(this.detail[t]):this.referenceFields.includes(t)&&(this.detail[t]=this.clearFieldReference(this.detail[t])),this.extraInfoPopulate()):delete this.detail[t])},e.prototype.clearValueFromArrayField=function(e,r){this.detail[e].selection&&(this.detail[e].selection=this.detail[e].selection.filter(function(e,t){return t!=r}),this.extraInfoPopulate())},e.prototype.clearValueFromMapField=function(e,t){this.detail[e].selection&&(delete this.detail[e].selection[t],this.extraInfoPopulate())},e.prototype.clearValueFromMapKey=function(e,t){this.detail[e].selection&&(this.detail[e].selection[t]=undefined,this.extraInfoPopulate())},e.prototype.checkValueDefinedFromDetail=function(t){var e=this.detail;if(!e.hasOwnProperty(t))return!1;if("undefined"==typeof e[t])return!1;if("number"==typeof this.detail[t]||"string"==typeof e[t]||"boolean"==typeof e[t])return!0;if("object"==typeof e[t]){if(this.multiSelectionFields.includes(t))return this.isDefinedFieldArrayMultiSelection(e[t]);if(this.arrayFields.some(function(e){return e[0]==t}))return this.isDefinedFieldArray(e[t]);if(this.mapFields.some(function(e){return e[0]==t}))return this.isDefinedFieldMap(e[t]);if(this.dateFields.includes(t))return this.isDefinedFieldDate(e[t]);if(this.referenceFields.includes(t))return this.isDefinedFieldReference(e[t])}return!1},e.prototype.clearValueFromDetailAndSearchList=function(e){this.clearValueFromDetail(e),this.searchList()},e.prototype.onAddArrayItem=function(t){if(this.arrayFields.some(function(e){return e[0]==t})&&this.detail[t]["new"]){var e=this.detail[t]["new"];this.detail[t]["new"]=undefined,this.detail[t].selection.push(e);var r=[];this.detail[t].value&&(r=this.detail[t].value.split(" | ")),r.push(e),r=r.filter(function(e){return!!e}),this.detail[t].value=r.join(" | "),this.extraInfoPopulate()}},e.prototype.onAddMapItem=function(t){if(this.mapFields.some(function(e){return e[0]==t})&&this.detail[t]["new"]){var e=this.detail[t]["new"];this.detail[t]["new"]=undefined,this.detail[t].selection[e]=undefined,this.extraInfoPopulate()}},e.prototype.onRefSelect=function(i){var n=this;if(this.refSelectDirective){var o=this.refSelectDirective.viewContainerRef;if(o.clear(),this.selectComponents[i]){var e=this.selectComponents[i].componentRef;if(e)o.insert(e.hostView);else{var t=this.selectComponents[i]["select-type"];t||console.warn("No component type found for reference field ",i);var r=this.componentFactoryResolver.resolveComponentFactory(t);e=o.createComponent(r),this.selectComponents[i].componentRef=e}var a=e.instance;this.detail[i]&&this.referenceFields.includes(i)&&(a.inputData=this.detail[i]._id),a.setFocus(),this.componentSubscription=a.done.subscribe(function(e){e&&(n.componentSubscription.unsubscribe(),o.detach());var t=a.outputData;if(t)switch(t.action){case"selected":if(n.arrayFields.some(function(e){return e[0]==i})){n.detail[i].selection.push(t.value);var r=[];n.detail[i].value&&(r=n.detail[i].value.split(" | ")),r.push(t.value.value),r=r.filter(function(e){return!!e}),n.detail[i].value=r.join(" | ")}else n.referenceFields.includes(i)&&(n.detail[i]=t.value);n.extraInfoPopulate();break;case"view":n.onRefShow(i,"select",t.value)}})}else console.warn("No reference defined for field: ",i)}else console.warn("No reference directive for field: ",i)},e.prototype.onRefShow=function(i,e,t){var n=this;if(!t&&this.detail[i]&&(t=this.detail[i]._id),t){var o=this.refSelectDirective.viewContainerRef;o.clear();var r=e+"-detail-type",a=this.selectComponents[i][r];if(a){var s=this.componentFactoryResolver.resolveComponentFactory(a),l=o.createComponent(s).instance;l.inputData=t,l.setFocus(),l.done.subscribe(function(e){e&&(l.done.unsubscribe(),o.clear());var t=l.outputData;if(t)switch(t.action){case"selected":if(n.arrayFields.some(function(e){return e[0]==i})){n.detail[i].selection.push(t.value);var r=[];n.detail[i].value&&(r=n.detail[i].value.split(" | ")),r.push(t.value.value),r=r.filter(function(e){return!!e}),n.detail[i].value=r.join(" | ")}else n.referenceFields.includes(i)&&(n.detail[i]=t.value);n.extraInfoPopulate();break;case"back":n.onRefSelect(i)}})}else console.error("No component type found for: %s",r)}else console.error("Show reference but no id is given.")},e.prototype.setFocus=function(){this.focusEl&&this.focusEl.nativeElement.focus()},e.prototype.uiCloseModal=function(){this.outputData=null,this.done.emit(!0)},e.prototype.uiOnEscapeKey=function(){this.uiCloseModal()},e.prototype.selectItemSelected=function(e){var t=this.list[e];this.selectedId=t._id,this.clickedId=t._id,this.outputData={action:"selected",value:{_id:t._id,value:this.stringify(t)},detail:t},this.done.emit(!0)},e.prototype.detailSelSelected=function(){var e=this.detail;this.outputData={action:"selected",value:{_id:e._id,value:this.stringify(e)},detail:e},this.done.emit(!0)},e.prototype.selectViewDetail=function(e){var t=this.list[e];this.clickedId=t._id,this.outputData={action:"view",value:t._id},this.done.emit(!0)},e.prototype.detailSelBack=function(){this.outputData={action:"back",value:null},this.done.emit(!0)},e.prototype.toggleMoreSearch=function(){this.moreSearchOpened=!this.moreSearchOpened},e.prototype.onSearchTextClear=function(){this.searchText=undefined,this.moreSearchOpened||this.searchList()},e.prototype.onSearchClear=function(){this.searchText=undefined;this.detail=this.formatDetail({}),this.searchList()},e.prototype.extraFieldsUnload=function(){var n=this;this.textEditors&&this.textEditors.forEach(function(e){var t=e.name,r=n.textEditorMap[t];if(r){var i=n.detail[r.fieldName];i&&e.setContent(i)}})},e.prototype.extraFieldsLoad=function(){var e,t,r=!0;if(this.textEditors){var i=this.textEditors.toArray();try{for(var n=I(i),o=n.next();!o.done;o=n.next()){var a=o.value,s=a.name,l=y(a.getContent(),2),d=l[0],c=l[1],u=this.textEditorMap[s];if(u){var p=u.fieldState;if(p.errors={},d)if("minlength"in u&&c.length<u.minlength)p.valid=!1,r=!(p.errors.minlength=!0);else if("maxlength"in u&&c.length>u.maxlength)p.valid=!1,r=!(p.errors.maxlength=!0);else{if("validators"in u){var h=u.validators.validateValue(c);if(h){p.valid=!1,p.errors=h,r=!1;continue}}p.valid=!0,p.errors=undefined,this.detail[u.fieldName]=d}else u.required&&(p.errors.required=!0,r=p.valid=!1)}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(t=n["return"])&&t.call(n)}finally{if(e)throw e.error}}}return r},e.prototype.onEdtiorPreview=function(t){this.textEditors&&this.textEditors.forEach(function(e){e.name==t&&e.preview()})},e.prototype.getParentRouteItem=function(){var e,t=this.route.snapshot;do{if(t.data&&1==t.data.mraLevel){e=t.data.item;break}t=t.parent}while(t);return e},e.prototype.getParentRouteItemId=function(){var e,t=this.route.snapshot;do{if(t.data&&1==t.data.mraLevel&&"id"in t.params){e=t.params.id;break}t=t.parent}while(t);return e},e.prototype.getParentRouteRefField=function(){var e=this.referenceFieldsMap;for(var t in e)if(e.hasOwnProperty(t)&&e[t]==this.parentItem)return t},e.prototype.getParentActivatedRouter=function(){var e=this.route;do{if(!e.snapshot.data.mraLevel)return e;e=e.parent}while(e);return this.route.root},e.prototype.toggleCheckedItem=function(e){this.checkedItem[e]=!this.checkedItem[e]},e.prototype.onAdd=function(){this.isAdding=!0},e.prototype.toggleAdd=function(){this.isAdding=!this.isAdding},e.prototype.onAddDone=function(e){this.isAdding=!1,e&&this.view==v.LIST&&this.populateList()},e.prototype.onDateSelectionToggle=function(e){this.detail[e].pop=!this.detail[e].pop},e.prototype.onDateSelection=function(e,t){this.detail[e].from||this.detail[e].to?this.detail[e].from&&!this.detail[e].to&&t.after(this.detail[e].from)?(this.detail[e].to=t,this.detail[e].pop=!1):(this.detail[e].to=null,this.detail[e].from=t):this.detail[e].from=t},e.prototype.isHovered=function(e,t){return this.detail[e].from&&!this.detail[e].to&&this.hoveredDate&&t.after(this.detail[e].from)&&t.before(this.hoveredDate)},e.prototype.isInside=function(e,t){return t.after(this.detail[e].from)&&t.before(this.detail[e].to)},e.prototype.isRange=function(e,t){return t.equals(this.detail[e].from)||t.equals(this.detail[e].to)||this.isInside(e,t)||this.isHovered(e,t)},e}(),x=function(){function e(){}return e.prototype.validate=function(e){var t=e.value,r=parseFloat(this.minnumber);return isNaN(r)?null:"number"==typeof t&&t<r?{minnumber:"must be no less than "+r}:null},e.decorators=[{type:s.Directive,args:[{selector:"[minnumber]",providers:[{provide:t.NG_VALIDATORS,useExisting:e,multi:!0}]}]}],e.propDecorators={minnumber:[{type:s.Input,args:["minnumber"]}]},e}(),b=function(){function e(){}return e.prototype.validate=function(e){var t=e.value,r=parseFloat(this.maxnumber);return isNaN(r)?null:"number"==typeof t&&r<t?{maxnumber:"must be no greater than "+r}:null},e.decorators=[{type:s.Directive,args:[{selector:"[maxnumber]",providers:[{provide:t.NG_VALIDATORS,useExisting:e,multi:!0}]}]}],e.propDecorators={maxnumber:[{type:s.Input,args:["maxnumber"]}]},e}(),F={minHeight:200,focus:!1,airMode:!1,dialogsInBody:!0,dialogsFade:!0,disableDragAndDrop:!1,toolbar:[["font",["style","fontname","fontsize","color"]],["style",["bold","italic","underline"]],["paragraph",["ul","ol","paragraph"]],["insert",["table","picture","link","video"]],["misc",["undo","redo","fullscreen"]]]},S=function(){function e(e,t){var r=this;this.el=e,this.render=t,this.id=Date.now();var i='\n            <div id="richtext'+this.id+'">\n            </div>\n            <div id="fullscreen'+this.id+"\"></div>'\n            ";$("#mraeditorfullscreenCss").length||$("<style type='text/css' id='mraeditorfullscreenCss'>\n\n.editorhide {\n    display: none;\n}\n.editorfullscreen {\n    display: block;\n    position: fixed; \n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%; \n    overflow: auto; \n    z-index: 1050;\n    background-color: #fff;\n}\n\n.editor-action-buttons {\n    width: 100%;\n    float:right; \n    text-align: right;\n    margin-bottom: 1.25rem;\n    margin-top: 2.5rem;\n}\n.editor-action-buttons .btn {\n    display: inline-block;\n    margin-left: 2.5rem;\n}\n\n</style>").appendTo("head"),this.render.setProperty(this.el.nativeElement,"innerHTML",i),setTimeout(function(){r.content&&$("#richtext"+r.id).html(r.content),$("#richtext"+r.id).summernote(F)},1)}return e.prototype.setContent=function(e){this.content=e,this.content&&($("#richtext"+this.id).each(function(e){$(this).summernote("destroy")}),$("#richtext"+this.id).html(this.content),$("#richtext"+this.id).summernote(F))},e.prototype.getContent=function(){var e=$("#richtext"+this.id).summernote("code");return[e,$("<div>"+e+"</div>").text()]},e.prototype.preview=function(){$("#mraeditorfullscreenDiv").length||$("#fullscreen"+this.id).append('\n<div class="editorfullscreen" id="mraeditorfullscreenDiv">\n\n<div class="container">\n  <div class="row">\n    <div class="col">\n      <div class="editor-action-buttons">\n            <button id="mraeditorfullscreenClose" class="btn btn-outline-success">Close</button>\n      </div>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col">\n        <div class="card">\n            <div class="card-body" id="mrafullscreenHtml"></div>\n        </div>\n    </div>\n  </div>\n</div>\n\n</div>\n'),$("#mraeditorfullscreenClose").click(function(){$("#mraeditorfullscreenDiv").remove()});var e=y(this.getContent(),2),t=e[0];e[1];$("#mrafullscreenHtml").html(t)},e.decorators=[{type:s.Directive,args:[{selector:"[mra-richtext-select]"}]}],e.ctorParameters=function(){return[{type:s.ElementRef},{type:s.Renderer2}]},e.propDecorators={name:[{type:s.Input,args:["mra-richtext-select"]}]},e}(),w=function(){function e(e,t){this.el=e,this.render=t}return e.prototype.setContent=function(e){var t=Date.now(),r='\n            <div class="card">\n                <div class="card-body" id="mraeditordisplay'+t+'"></div>\n            </div>\n        ';this.render.setProperty(this.el.nativeElement,"innerHTML",r),$("#mraeditordisplay"+t).html(e)},e.decorators=[{type:s.Directive,args:[{selector:"[mra-richtext-show]"}]}],e.ctorParameters=function(){return[{type:s.ElementRef},{type:s.Renderer2}]},e.propDecorators={name:[{type:s.Input,args:["mra-richtext-show"]}]},e}(),A=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{imports:[],declarations:[x,b,S,w],exports:[x,b,S,w],providers:[f]}]}],e}(),D=function(){function e(){this.detachedRouteHandles={},this.pageYOffset={},this.editItems={},this.isAuth=!1}return e.prototype.isAuthorized=function(){var e=JSON.parse(localStorage.getItem("mdds-auth-record"));return!(!e||!e.accessToken)},e.prototype.getLogoutTime=function(){var e=JSON.parse(localStorage.getItem("mdds-auth-record"));return e?e.logoutTs:0},e.prototype.isLogoutReload=function(){return!this.isAuthorized()&&Date.now()-this.getLogoutTime()<1e3},e.prototype.checkAuthentication=function(){var e=this.isAuth;this.isAuth=this.isAuthorized(),this.isAuth!=e&&(this.detachedRouteHandles={})},e.prototype.shouldDetach=function(e){if(e.routeConfig&&"list"===e.routeConfig.path){var t=e._routerState.url;this.pageYOffset[t]=window.pageYOffset}return"list"===e.routeConfig.path},e.prototype.store=function(e,t){var r=new Date,i=e._routerState.url;t&&(this.detachedRouteHandles[i]=[t,r.getTime()])},e.prototype.shouldAttach=function(e){this.checkAuthentication();var t=new Date,r=e._routerState.url;return!e.routeConfig||"new"!==e.routeConfig.path&&"edit/:id"!==e.routeConfig.path||e.data&&e.data.item&&(this.editItems[e.data.item]=!0),!(!e.routeConfig||"list"!==e.routeConfig.path)&&(!!this.detachedRouteHandles[r]&&!(3e4<t.getTime()-this.detachedRouteHandles[r][1]))},e.prototype.retrieve=function(e){var t=new Date,r=e._routerState.url;if(!e.routeConfig||"list"!==e.routeConfig.path)return null;if(e.data.item&&e.data.item in this.editItems)return delete this.editItems[e.data.item],delete this.detachedRouteHandles[r],null;if(!this.detachedRouteHandles[r])return null;if(3e4<t.getTime()-this.detachedRouteHandles[r][1])return null;var i=this.pageYOffset[r];return setTimeout(function(){console.log("==retrieve: ",r,i),window.scrollTo(0,i)},20),this.detachedRouteHandles[r][0]},e.prototype.shouldReuseRoute=function(e,t){return!this.isLogoutReload()&&e.routeConfig===t.routeConfig},e}();e.ViewType=v,e.BaseComponent=g,e.ServiceError=p,e.BaseService=h,e.MraCommonService=f,e.MraModule=A,e.MaxNumber=b,e.MinNumber=x,e.MraRichTextSelectDirective=S,e.MraRichTextShowDirective=w,e.ErrorToastConfig=c,e.ErrorToast=u,e.ModalConfig=i,e.Modal=a,e.SnackBarConfig=l,e.SnackBar=d,e.stringToDateStructure=function(e,t){var r,i,n=[];if(e.length==t.length){try{for(var o=I([{re:/yyyy/i,len:4},{re:/yy/i,len:2},{re:/MM/,len:2},{re:/dd/i,len:2}]),a=o.next();!a.done;a=o.next()){var s=a.value,l=t.search(s.re),d=void 0;d=-1!=l?parseInt(e.slice(l,l+s.len)):NaN,n.push(d)}}catch(m){r={error:m}}finally{try{a&&!a.done&&(i=o["return"])&&i.call(o)}finally{if(r)throw r.error}}var c=y(n,4),u=c[0],p=c[1],h=c[2],f=c[3];if(!(isNaN(u)&&isNaN(p)||isNaN(h)||isNaN(f)))return{day:f,month:h,year:u||2e3+p}}},e.dateStructureToString=function(e,t){var r,i,n;if(!e)return"";if(r=e.day,i=e.month,n=e.year,"number"!=typeof r||"number"!=typeof i||"number"!=typeof n)return"";var o=n.toString().slice(2),a=r<10?"0"+r:r.toString(),s=i<10?"0"+i:i.toString();return t.replace(/yyyy/gi,n.toString()).replace(/yy/gi,o.toString()).replace(/MM/g,s.toString()).replace(/dd/gi,a.toString())},e.MraRouteReuseStrategy=D,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=mean-rest-angular.umd.min.js.map