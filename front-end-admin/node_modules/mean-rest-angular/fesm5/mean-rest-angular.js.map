{"version":3,"file":"mean-rest-angular.js.map","sources":["ng://mean-rest-angular/util.modal.ts","ng://mean-rest-angular/util.snackbar.ts","ng://mean-rest-angular/util.errortoast.ts","ng://mean-rest-angular/base.service.ts","ng://mean-rest-angular/common.service.ts","ng://mean-rest-angular/util.tools.ts","ng://mean-rest-angular/base.component.ts","ng://mean-rest-angular/common.directives.ts","ng://mean-rest-angular/summernote.directive.ts","ng://mean-rest-angular/mra.module.ts","ng://mean-rest-angular/ngb-date-formatter.ts","ng://mean-rest-angular/route-reuse-strategy.ts"],"sourcesContent":["var modalHtml = `\n<div class=\"meanExpressAngularModal\" id=\"meanExpressAngularModal\">\n  <div class=\"meanExpressAngularModal-content\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"meanExpressAngularModalTitle\">Modal title from function</h5>\n        <button type=\"button\" class=\"close\" id=\"meanExpressAngularModalClose\" aria-label=\"Close\" >\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\" id=\"meanExpressAngularModalBody\">\n        Hello\n      </div>\n      <div class=\"modal-footer\" id=\"meanExpressAngularModalFooter\">\n      </div>\n    </div>\n  </div>\n</div> \n`;\n\nvar modalCss = `\n.meanExpressAngularModal {\n    display: none; \n    position: fixed; \n    z-index: 100; \n    padding-top: 100px; \n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%; \n    overflow: auto; \n    background-color: rgb(0,0,0);\n    background-color: rgba(0,0,0,0.4);\n}\n\n.meanExpressAngularModal.show {\n    display: block; \n}\n\n.meanExpressAngularModal-content {\n    position: relative;\n    background-color: #fefefe;\n    margin: auto;\n    padding: 0;\n    border: 1px solid #888;\n    width: 50%;\n    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\n    -webkit-animation-name: modalanimatetop;\n    -webkit-animation-duration: 0.4s;\n    animation-name: modalanimatetop;\n    animation-duration: 0.4s\n}\n\n@-webkit-keyframes modalanimatetop {\n    from {top:-300px; opacity:0} \n    to {top:0; opacity:1}\n}\n\n@keyframes modalanimatetop {\n    from {top:-300px; opacity:0}\n    to {top:0; opacity:1}\n}\n`;\n\ndeclare var $: any;\n\nexport class ModalConfig {\n    title: string;\n    content: string;\n    //list of button text\n    buttons: string[];\n    //list of button returns when clicked\n    returns: boolean[];\n    callBack: (result) => void;\n}\n\nexport class Modal {\n    constructor(private config: ModalConfig ) {}\n\n    public show() {\n        var config = this.config;\n        if (!$('#meanExpressAngularModal').length) {\n            $(\"<style type='text/css' id='meanExpressAngularModalCss'>\" + modalCss + \"</style>\").appendTo(\"head\"); \n            $('body').append(modalHtml);\n        }\n        \n        $( \"#meanExpressAngularModalFooter\" ).empty();\n        for (var i=0; i< config.buttons.length; i++) {\n            var text = config.buttons[i];\n            var button = '<button type=\"button\" class=\"btn btn-primary\" id=\"meanExpressAngularModalBtn' + i + '\" >' + text + '</button>';\n            $( \"#meanExpressAngularModalFooter\" ).append(button);\n            \n            $( \"#meanExpressAngularModalBtn\"+i ).click(function(event) {\n                $('#meanExpressAngularModal').removeClass(\"show\");\n                var index = parseInt(event.target.id.replace(\"meanExpressAngularModalBtn\", \"\"));\n                config.callBack(config.returns[index]);\n            });\n        }\n\n        $( \"#meanExpressAngularModalTitle\" ).empty();\n        $( \"#meanExpressAngularModalTitle\" ).append(config.title);\n        $( \"#meanExpressAngularModalBody\" ).empty();\n        $( \"#meanExpressAngularModalBody\" ).append(config.content);\n\n        $( \"#meanExpressAngularModalClose\" ).click(function() {\n            $('#meanExpressAngularModal').removeClass(\"show\");\n            config.callBack(false);\n        });\n\n        $('#meanExpressAngularModal').addClass(\"show\");\n    }\n    \n    public hide() {\n        $('#meanExpressAngularModal').removeClass(\"show\");\n    }\n}\n","var snackBarCss = `\n.meanExpressAngularSnackBar {\n    visibility: hidden;\n    min-width: 250px;\n    margin-left: -125px;\n    background-color: #333;\n    color: #fff;\n    text-align: center; \n    border-radius: 2px; \n    padding: 16px; \n    position: fixed;\n    z-index: 1;\n    left: 50%;\n    bottom: 30px;\n}\n\n.meanExpressAngularSnackBar.show {\n    visibility: visible;\n\n    -webkit-animation: snackbarfadein 0.5s, snackbarfadeout 0.5s 2.5s;\n    animation: snackbarfadein 0.5s, snackbarfadeout 0.5s 2.5s;\n}\n\n@-webkit-keyframes snackbarfadein {\n    from {bottom: 0; opacity: 0;} \n    to {bottom: 30px; opacity: 1;}\n}\n\n@keyframes snackbarfadein {\n    from {bottom: 0; opacity: 0;}\n    to {bottom: 30px; opacity: 1;}\n}\n\n@-webkit-keyframes snackbarfadeout {\n    from {bottom: 30px; opacity: 1;} \n    to {bottom: 0; opacity: 0;}\n}\n\n@keyframes snackbarfadeout {\n    from {bottom: 30px; opacity: 1;}\n    to {bottom: 0; opacity: 0;}\n}\n`;\ndeclare var $: any;\n\nexport class SnackBarConfig {\n    content: string;\n}\n\nexport class SnackBar {\n    \n    constructor(private config: SnackBarConfig ) {}\n    private getHtml() {\n        var id = 'meanExpressAngularSnackBar' + Date.now();\n        var snackBarHtml = `\n<div class=\"meanExpressAngularSnackBar\" id=\"` + id + `\">\n\n</div>\n`;\n        return {id: id, html: snackBarHtml};\n    }\n\n    public show() {\n        if (!$('#meanExpressAngularSnackBarCss').length) {\n            $(\"<style type='text/css' id='meanExpressAngularSnackBarCss'>\" + snackBarCss + \"</style>\").appendTo(\"head\"); \n        }\n        \n        var html = this.getHtml();\n        var selector = '#' + html.id;\n        $('body').append(html.html);\n        $(selector).append(this.config.content);\n\n        $(selector).addClass(\"show\");\n        \n        setTimeout(function(){ \n            $(selector).removeClass(\"show\");\n            setTimeout(function(){$(selector).remove();}, 500);\n         }, 3000);\n    }\n\n}\n","var errorCss = `\n.meanExpressAngularError {\n    visibility: hidden; \n    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);\n    min-width: 250px; \n    max-width: 60%;\n    left: 50%;\n    top: 20%;\n    transform: translate(-50%, 0);\n    position: fixed; \n    z-index: 10; \n}\n.meanExpressAngularError.show {\n    visibility: visible; \n}\n\n.meanExpressAngularErrorMoreLink {\n    display: none;\n}\n.meanExpressAngularErrorMoreLink.show {\n    display: block;\n}\n.meanExpressAngularErrorMore {\n    display: none;\n    font-size: 0.75rem;\n    font-color: black;\n    background-color: gray;\n}\n.meanExpressAngularErrorMore.show {\n    display: block;\n}\n`;\n\ndeclare var $: any;\n\nexport class ErrorToastConfig {\n    content: string;\n    more: string;\n}\n\nexport class ErrorToast {\n    \n    constructor(private config: ErrorToastConfig ) {}\n    private getHtml() {\n        var id = 'meanExpressAngularError' + Date.now();\n        var errorHtml = `\n<div class=\"alert alert-danger fade in alert-dismissible meanExpressAngularError\"\n    id=\"`+id+`\">\n <button type=\"button\" class=\"close\" aria-label=\"Close\" id=\"button`+id+`\">\n    <span aria-hidden=\"true\" style=\"font-size:20px\">Ã</span>\n  </button>\n  <div>\n    <strong>Error!</strong>\n  </div>\n  <div id=\"content`+id+`\">\n  </div>\n  <a id=\"link`+id+`\" class=\"meanExpressAngularErrorMoreLink\" href=\".\" >Show more details...\n  </a>\n  <div id=\"more`+id+`\" class=\"meanExpressAngularErrorMore\">\n  </div>\n</div>\n`;\n        return {id: id, html: errorHtml};\n    }\n\n    public show() {\n        if (!$('#meanExpressAngularErrorCss').length) {\n            $(\"<style type='text/css' id='meanExpressAngularErrorCss'>\" + errorCss + \"</style>\").appendTo(\"head\"); \n        }\n        var html = this.getHtml();\n        var selector = '#' + html.id;\n        var contentSelector = '#content' + html.id;\n        var moreSelector = '#more' + html.id;\n        var linkSelector = '#link' + html.id;\n        var buttonSelector = '#button' + html.id;\n        $('body').append(html.html);\n        $(contentSelector).append(this.config.content);\n        if (this.config.more) {\n            $(moreSelector).append(this.config.more);\n            $(linkSelector).addClass(\"show\");\n            $(linkSelector).click(function(event) {\n                event.preventDefault();\n                $(moreSelector).addClass(\"show\");\n            });\n        }\n        $(buttonSelector).click(function(event) {$(selector).removeClass(\"show\");});\n        \n        $(selector).addClass(\"show\");\n    }\n\n}\n","import { Observable, throwError } from 'rxjs';\nimport { catchError, map, filter, retry } from 'rxjs/operators';\nimport { HttpClient, HttpHeaders,HttpParams, HttpErrorResponse } from '@angular/common/http';\n\nexport class ServiceError {\n    status:number;\n    clientErrorMsg:string;\n    serverError:any;\n}\n\nexport class BaseService {\n    protected storage:any = {};\n\n    constructor(protected http: HttpClient, protected serviceUrl: string) {}\n    \n    public getFromStorage(name:string) {\n        return this.storage[name];\n    }\n    public putToStorage(name:string, value:any) {\n        this.storage[name] = value;\n    }\n    \n    protected errorResponseHandler(error: HttpErrorResponse) {\n      let err:ServiceError = new ServiceError();;\n      if (error.error instanceof ErrorEvent) {\n          // A client-side or network error occurred. Handle it accordingly.\n          err.status = 0;\n          err.clientErrorMsg = error.error.message\n      } else {\n          // The backend returned an unsuccessful response code.\n          // The response body may contain clues as to what went wrong,\n          err.status = error.status;\n          err.serverError = error.error;\n      }\n      // return an observable with a user-facing error message\n      return throwError(\n        err\n      );\n    }\n\n    protected formatDetail(detail:any): any {\n        return detail;\n    }\n    \n    protected formatList(list:any): any {\n        return list;\n    }\n\n    getList(page:number, per_page:number, searchContext:any) {\n        let httpOptions = {\n            params: new HttpParams().set('__page', page.toString())\n                                    .set('__per_page', per_page.toString()),\n            headers: new HttpHeaders({ 'Accept': 'application/json' }),\n        };\n        \n        if (!searchContext) {\n            return this.http.get<any>(this.serviceUrl, httpOptions)\n                .pipe(\n                    map(this.formatList),\n                    catchError(this.errorResponseHandler)\n                );\n        }\n        httpOptions.params = httpOptions.params.set('action', \"Search\");\n        return this.http.post<any>(this.serviceUrl+ \"mddsaction/get\", searchContext, httpOptions)\n            .pipe(\n                catchError(this.errorResponseHandler)\n            );\n    }\n\n    getListWithCondition(page:number, per_page:number) {\n        let httpOptions = {\n            params: new HttpParams().set('__page', page.toString())\n                                    .set('__per_page', per_page.toString()),\n            headers: new HttpHeaders({ 'Accept': 'application/json' }),\n        };\n\n        return this.http.get<any>(this.serviceUrl, httpOptions)\n            .pipe(\n                map(this.formatList),\n                catchError(this.errorResponseHandler)\n            );\n    }\n\n    getDetailForAction(id: string, action: string) {\n        let httpOptions = {\n          headers: new HttpHeaders({ 'Accept': 'application/json' }),\n        };\n        let serviceUrl = this.serviceUrl\n        if (action) {\n          httpOptions['params'] = new HttpParams().set('action', action);\n          if (action == \"edit\") action = \"post\"\n          serviceUrl = serviceUrl + \"mddsaction/\" + action + \"/\";\n        }\n        return this.http.get<any>(serviceUrl + id, httpOptions)\n            .pipe(\n                map(this.formatDetail),\n                catchError(this.errorResponseHandler)\n            );\n    }\n    getDetail(id: string) {\n        return this.getDetailForAction(id, null);\n    }\n    deleteOne(id:string) {\n        return this.http.delete<any>(this.serviceUrl + id)\n            .pipe(\n                catchError(this.errorResponseHandler)\n            );\n    }\n    deleteManyByIds(ids:string[]) {\n        let httpOptions = {\n            headers: new HttpHeaders({ 'Content-Type': 'application/json' }),\n            params: new HttpParams().set('action', \"DeleteManyByIds\"),\n        };\n        return this.http.post<any>(this.serviceUrl + \"mddsaction/delete\", ids, httpOptions)\n            .pipe(\n                catchError(this.errorResponseHandler)\n            );\n    }\n    createOne(item:any) {\n        let httpOptions = {\n            headers: new HttpHeaders({ 'Content-Type': 'application/json' })\n        };\n        return this.http.put<any>(this.serviceUrl, item, httpOptions)\n            .pipe(\n                map(this.formatDetail),\n                catchError(this.errorResponseHandler)\n            );\n    }\n    updateOne(id:string, item:any) {\n        let httpOptions = {\n            headers: new HttpHeaders({ 'Content-Type': 'application/json' })\n        };\n        return this.http.post<any>(this.serviceUrl + id, item, httpOptions)\n            .pipe(\n                catchError(this.errorResponseHandler)\n            );\n    }\n}\n","import { Injectable } from '@angular/core';\n \n@Injectable(\n)\nexport class MraCommonService {\n    private storage:any = {};\n\n    constructor() {}\n    \n    public getFromStorage(name:string) {\n        return this.storage[name];\n    }\n    public putToStorage(name:string, value:any) {\n        this.storage[name] = value;\n    }\n}\n","export class Util {\n\n  static clone(obj:any):any {\n    let copy;\n\n    // Handle the 3 simple types, and null or undefined\n    if (null == obj || \"object\" != typeof obj) return obj;\n\n    // Handle Date\n    if (obj instanceof Date) {\n        copy = new Date();\n        copy.setTime(obj.getTime());\n        return copy;\n    }\n\n    // Handle Array\n    if (obj instanceof Array) {\n        copy = [];\n        for (var i = 0, len = obj.length; i < len; i++) {\n            copy[i] = Util.clone(obj[i]);\n        }\n        return copy;\n    }\n\n    // Handle Object\n    if (obj instanceof Object) {\n        copy = {};\n        for (var attr in obj) {\n            if (obj.hasOwnProperty(attr)) copy[attr] = Util.clone(obj[attr]);\n        }\n        return copy;\n    }\n\n    throw new Error(\"Unable to copy obj! Its type isn't supported.\");\n  }\n\n}\n","import { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { Injector, EventEmitter } from '@angular/core';\n\nimport { Location } from '@angular/common';\n\nimport { Observable } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\n\nimport { ModalConfig, Modal} from './util.modal';\nimport { SnackBarConfig, SnackBar} from './util.snackbar';\nimport { ErrorToastConfig, ErrorToast} from './util.errortoast';\n\nimport { BaseService, ServiceError } from './base.service';\nimport { MraCommonService } from './common.service';\nimport { BaseComponentInterface } from './base.interface';\nimport { Util } from './util.tools';\n\nexport enum ViewType {\n    LIST,\n    DETAIL,\n    EDIT,\n}\n\nexport {ServiceError};\n\nexport class BaseComponent implements BaseComponentInterface {\n    protected objectKeys = Object.keys;\n  \n    private storage:any = {};\n\n    //For list and pagination\n    protected list:any[] = [];\n        \n    protected majorUi = true;\n    protected eventEmitter: EventEmitter<any> = new EventEmitter();\n    \n    protected page: number = 1;\n    protected per_page: number = 25;\n    protected total_count: number = 0;\n    protected total_pages: number = 0;\n    \n    private new_page;\n    \n    protected pages: number[] = [];\n    protected left_more:boolean = false;\n    protected right_more:boolean = false;\n\n    protected checkAll = false;\n    //used to mark deleted items, or items that will show sub-detail, etc.\n    protected checkedItem:boolean[] = [];\n    \n    //For edit and view details\n    protected detail:any = {};\n    private _detail:any = {}; //a clone and used to send/receive from next work\n    private _extra:any = {}; //extra info.\n    protected id:string;\n    protected subEdit = false; //a edit-sub component\n    //for fields with enum values\n    protected enums:any = {};\n    protected stringFields = [];\n    protected referenceFields: string[] = [];\n    protected referenceFieldsMap = {};\n    protected dateFields = [];\n    protected indexFields = [];\n    protected multiSelectionFields = [];\n    protected arrayFields = []; //element is [fieldName, elementType]\n    protected mapFields = []; //element is [fieldName, elementType, mapKey]\n    protected dateFormat = \"MM/DD/YYYY\";\n    protected timeFormat = \"hh:mm:ss\";\n\n    protected hiddenFields = []; //fields hide from view. Currrently used by \"Add\" view of edit-sub\n\n    protected ItemCamelName: string;\n    protected itemName: string;\n    protected parentItem: string;\n  \n    protected refreshing: boolean = false;\n  \n    protected commonService: MraCommonService;\n\n    constructor(\n        protected service: BaseService,\n        protected injector: Injector,\n        protected router: Router,\n        protected route: ActivatedRoute,\n        protected location: Location,\n        protected view: ViewType,\n        protected itemCamelName: string) {\n      \n        this.ItemCamelName = itemCamelName.charAt(0).toUpperCase() + itemCamelName.substr(1);\n        this.itemName = itemCamelName.toLowerCase();\n        this.parentItem = this.getParentRouteItem();\n        this.commonService = injector.get(MraCommonService);\n        \n    }\n    \n    protected onServiceError(error:ServiceError):void {\n        //clear any pending flags\n        this.refreshing = false;\n      \n        let errMsg:string;\n        let more:string;\n        if (error.clientErrorMsg) {\n            errMsg = error.clientErrorMsg;\n        }\n        else if (error.serverError) {\n            if (error.status == 401)  return; //Don't show unauthorized error\n            if (typeof error.serverError === 'object') {\n                errMsg = error.status + \": \" + JSON.stringify(error.serverError);\n            } else {\n                errMsg = error.status + \": \" +error.serverError;\n            }\n        }\n        console.info(\"Error: \" + errMsg);\n        if (!errMsg) errMsg = \"Unknown error.\";\n        if (errMsg.length > 80) {\n            more = errMsg;\n            errMsg = errMsg.substring(0, 80) + \"...\";\n        }\n        let errorToastConfig: ErrorToastConfig = {\n            content: errMsg,\n            more: more\n        }\n        let errorToast = new ErrorToast(errorToastConfig);\n        errorToast.show();\n    }\n\n    protected populatePages():void {        \n        this.pages = []\n        const SHOW_PAGE = 9;\n        const HALF = (SHOW_PAGE-1)/2;\n        \n        let min, max;\n        if (this.total_pages <= SHOW_PAGE) {\n            min = 1;\n            max = this.total_pages;\n            this.left_more = false; \n            this.right_more = false;\n        } else {\n            if (this.page - 1 < HALF) {\n                min = 1;\n                max = SHOW_PAGE-1;\n                this.left_more = false; \n                this.right_more = true;\n            } else if (this.total_pages - this.page < HALF) {\n                max = this.total_pages;\n                min = (this.total_pages - SHOW_PAGE + 1) + 1;\n                this.left_more = true; \n                this.right_more = false;\n            } else {\n                min = this.page - HALF + 1;\n                max = this.page + HALF - 1;\n                this.left_more = true; \n                this.right_more = true;\n            }\n        }\n        for (let i = min; i <= max; i++) {\n            this.pages.push(i);\n        }\n    }\n    \n    private getKey(key:string):string {\n        let url = this.router.url.split(';')[0].split('?')[0];\n        return url+ \":\" + key;\n    }\n    private putToStorage(key:string, value:any):void {\n        if (this.majorUi) {\n            //only major UI we want to cache and recover when user comes back\n            this.commonService.putToStorage(this.getKey(key), value);\n        } else {\n            this.storage[key] = value;\n        }\n    }\n    private getFromStorage(key:string):any {\n        if (this.majorUi) {\n            return this.commonService.getFromStorage(this.getKey(key));\n        } else {\n            return this.storage[key];\n        }\n    }\n    private routeToPage(page:number):void {\n        this.putToStorage(\"page\", page);\n        this.populateList();\n    }\n    \n    protected onNextPage():void {\n        if (this.page >= this.total_pages) return;\n        this.routeToPage(this.page + 1);\n    }\n    \n    protected onPreviousPage():void {\n        if (this.page <= 1) return;\n        this.routeToPage(this.page - 1);\n    }\n\n    protected onGotoPage(p:number):void {\n        if (p > this.total_pages || p < 1) return;\n        this.routeToPage(p)\n    }\n    \n    protected goBack() {\n        this.location.back();\n        /*\n        // window.history.back();\n        if (this.view != ViewType.EDIT)\n            this.location.back();\n        else {\n            let url = this.location.path(); //in EDIT view, the current url is skipped. So get the \"previous\" one from path.\n            this.router.navigateByUrl(url);\n        }\n        */\n    }\n    \n    protected stringify(detail:any): string {\n        let str = \"\";\n        for (let fnm of this.indexFields) {\n            if (detail[fnm] && typeof detail[fnm] != 'object') str += \" \" + detail[fnm];\n        }\n        if (!str)  {\n            for (let prop in detail) {\n                if (prop !== '_id' && detail[prop] && typeof detail[prop] != 'object') {\n                    str += \" \" + detail[prop];\n                }\n            }\n        }\n        if (!str) str = detail[\"_id\"]?detail[\"_id\"]:\"...\"\n        str = str.replace(/^\\s+|\\s+$/g, '')\n        if (str.length > 30) str = str.substr(0, 27) + '...';\n        return str;\n    }\n  \n    /***Start: handle reference fields***/\n    protected formatReferenceField(field: any, fieldName: string ):any {\n        let id, value;\n        if (typeof field == 'string') {\n            //assume this is the \"_id\", let see we have the cached details for this ref from service\n            let refDetail = this.commonService.getFromStorage(field);\n            if (refDetail && (typeof refDetail == 'object')) field = refDetail;\n            else {\n                id = field;\n                field = {'_id': id};\n            }\n        } else if (field && (typeof field == 'object') ) {\n            id = field['_id'];\n            let referIndex = '';\n            for (let k in  field) {\n                if (k != '_id') referIndex += \" \" + field[k];\n            }\n            referIndex = referIndex.replace(/^\\s+|\\s+$/g, '');\n            if (referIndex.length >= 20) referIndex = referIndex.substring(0, 20) + \"...\";\n            field = {'_id': id, 'value': referIndex? referIndex: fieldName};\n        } else {//not defined\n            field = {'_id': id, 'value': value};\n        }\n        return field;\n    }\n    protected formatReference(detail:any ):any {\n        for (let fnm of this.referenceFields) {\n            detail[fnm] = this.formatReferenceField(detail[fnm], fnm);\n        }\n        return detail;\n    }\n    protected deFormatReference(detail:any ):any {\n        for (let fnm of this.referenceFields) {\n            if (typeof detail[fnm] !== 'object') { //not defined\n                //let date values undefined\n                delete detail[fnm];\n            } else {\n                let id = detail[fnm]['_id'];\n                if (typeof id !== 'string') delete detail[fnm];\n                else detail[fnm] = id;\n            }\n        }\n        return detail;\n    }\n    \n    protected clearFieldReference(field:any ):any {\n        for (let prop in field) {\n            field[prop] = undefined;\n        }\n        return field;\n    }\n\n    protected isDefinedFieldReference(field:any ):any {\n        if ('_id' in field && typeof field['_id'] == 'string') return true;\n        return false;\n    }\n    /***Start: handle date fields***/    \n    protected formatDateField(field:string):any {\n        let fmt = this.dateFormat;\n        let t_fmt = this.timeFormat;\n        let d, M, yyyy, h, m, s;\n\n        let dt = new Date(field);\n        \n        let dd, MM, hh, mm, ss;\n        d = dt.getDate();\n        M = dt.getMonth()+1; \n        yyyy = dt.getFullYear();\n        \n        let yy = yyyy.toString().slice(2);\n        h = dt.getHours();\n        m = dt.getMinutes();\n        s = dt.getSeconds();\n        \n        dd= d<10? '0'+d: d.toString();\n        MM= M<10? '0'+M: M.toString();\n        hh= h<10? '0'+h: h.toString();\n        mm= m<10? '0'+m: m.toString();\n        ss= s<10? '0'+s: s.toString();\n        \n        let value = fmt.replace(/yyyy/ig, yyyy.toString()).\n                       replace(/yy/ig, yy.toString()).\n                       replace(/MM/g, MM.toString()).\n                       replace(/dd/ig, dd.toString());\n      \n        let t_value = t_fmt.replace(/hh/ig, hh.toString()).\n                       replace(/mm/g, mm.toString()).\n                       replace(/ss/ig, ss.toString());\n        /*Datepicker uses NgbDateStruct as a model and not the native Date object. \n        It's a simple data structure with 3 fields. Also note that months start with 1 (as in ISO 8601).\n        \n        we add h, m, s here\n        */\n        //\"from\" and \"to\" used for search context. pop: show the selection popup\n        return {'date':{ day: d, month: M, year: yyyy}, 'value': value, 'from': undefined, 'to': undefined, 'pop':false,\n                'time':{ hour: h, minute: m, second: s}, 't_value': value, 't_from': undefined, 't_to': undefined, 't_pop':false}\n\n    }\n    \n    protected formatDate(detail:any ):any {\n        for (let fnm of this.dateFields) {\n            let value, date;\n            if (typeof detail[fnm] !== 'string') { //not defined\n                //important: let date values undefined. \"from\" and \"to\" used for search context. pop: show the selection popup\n                detail[fnm] = {'date':undefined, 'value': undefined, 'from': undefined, 'to': undefined, 'pop':false};\n            }\n            else {\n                detail[fnm] = this.formatDateField(detail[fnm]);\n            }\n        }\n        return detail;\n    }\n    \n    protected deFormatDateField(date:any):string {\n        let d, M, yyyy, h, m, s;\n        \n        yyyy = date.year;\n        M = date.month - 1;\n        d = date.day;\n        \n        if (typeof yyyy !== 'number' || typeof M !== 'number' || typeof d !== 'number') return null;\n        else {\n            let dt = new Date(yyyy, M, d, 0, 0, 0, 0);\n            return dt.toISOString();\n        }\n    }\n    \n    protected deFormatDate(detail:any ):any {\n        for (let fnm of this.dateFields) {\n            let value;\n            if (typeof detail[fnm] !== 'object') { //not defined\n                //let date values undefined\n                delete detail[fnm];\n            }\n            else {\n                if (! detail[fnm].date) delete detail[fnm];\n                else {\n                    let dateStr = this.deFormatDateField(detail[fnm].date);\n                    if (!dateStr) delete detail[fnm];\n                    else detail[fnm] = dateStr;\n                }\n            }\n        }\n        return detail;\n    }\n    protected clearFieldDate(field:any ):any {\n        for (let prop in field) {\n            field[prop] = undefined;\n        }\n        return field;\n    }\n    protected isDefinedFieldDate(field:any ):any {\n        if (typeof field === 'object') {\n                if (typeof field['date'] == 'object') return true;\n                if (typeof field['from'] == 'object') return true;\n                if (typeof field['to'] == 'object') return true;\n        }\n        return false;\n    }\n\n    /***Start: handle array of multi-selection fields***/\n    protected formatArrayMultiSelectionField(field: any, enums: any): any {\n        let selectObj = {};\n        let value = \"\";\n        for (let e of enums) {\n            selectObj[e] = false; //not exist\n        }\n        if (Array.isArray(field)) { //not defined\n            for (let e of field) {\n                selectObj[e] = true;  //exist.\n            }\n            value = field.join(\" | \")\n        }\n        return {'selection': selectObj, value: value};\n\n    }\n    protected formatArrayMultiSelection(detail:any ):any {\n        for (let fnm of this.multiSelectionFields) {\n            detail[fnm] = this.formatArrayMultiSelectionField(detail[fnm], this.enums[fnm]);\n        }\n        return detail;\n    }\n    \n    protected deFormatArrayMultiSelection(detail:any ):any {\n        for (let fnm of this.multiSelectionFields) {\n            if (typeof detail[fnm] !== 'object') { //not defined\n                delete detail[fnm];\n            }\n            else {\n                if (! detail[fnm].selection) delete detail[fnm];\n                else {\n                    let selectArray = [];\n                    for (let e of this.enums[fnm]) {\n                        if (detail[fnm].selection[e]) selectArray.push(e);\n                    }\n\n                    if (selectArray.length > 0) detail[fnm] = selectArray;\n                    else delete detail[fnm];\n                }\n            }\n        }\n        return detail;\n    }\n    protected clearFieldArrayMultiSelection(field:any ):any {\n        if (!field['selection']) return field;\n        for (let prop in field['selection']) {\n            field['selection'][prop] = false; //not exist\n        }\n        return field;\n    }\n\n    protected isDefinedFieldArrayMultiSelection(field:any ):any {\n        if ('selection' in field && typeof field['selection'] == 'object') {\n            let keys = Object.keys(field['selection']);\n            return keys.some(e=>{return field['selection'][e]});\n        }\n        return false;\n    }\n    protected multiselectionSelected(fieldName) {\n        if (!this.detail[fieldName] || typeof this.detail[fieldName]['selection'] != 'object') {\n            return false;\n        }\n        return this.isDefinedFieldArrayMultiSelection(this.detail[fieldName]);\n    }\n    /***End: handle array of multi-selection fields***/\n    /***Start: handle map fields***/\n    protected formatMapField(field: any, elementType: string): any {\n        let selectObj = {};\n        let values = [];\n        if (typeof field == 'object') {\n            selectObj = field;\n            for (let e in field) {\n              if (elementType === 'SchemaString') {\n                values.push(e + \"(\" + field[e] + \")\");\n              }\n            }\n        }\n        values = values.filter(x=>!!x);\n        let value = values.join(\" | \")\n        return {'selection': selectObj, value: value, keys: []};\n\n    }\n    protected formatMapFields(detail:any ):any {\n        for (let f of this.mapFields) {\n            //[fieldName, elementType]\n            detail[f[0]] = this.formatMapField(detail[f[0]], f[1]);\n        }\n        return detail;\n    }\n\n    protected deFormatMapFields(detail:any ):any {\n        for (let f of this.mapFields) {\n            //[fieldName, elementType]\n            let fnm = f[0];\n            let elementType = f[1];\n          \n            if (typeof detail[fnm] !== 'object') { //not defined\n                delete detail[fnm];\n            }\n            else {\n                if (! detail[fnm].selection) delete detail[fnm];\n                else {\n                    let selectMap = detail[fnm].selection;\n                    for (let e in detail[fnm].selection) {\n                      if (elementType === 'SchemaString') {\n                        ;\n                      }\n                    }\n\n                    if (Object.keys(selectMap).length > 0) detail[fnm] = selectMap;\n                    else delete detail[fnm];\n                }\n            }\n        }\n        return detail;\n    }\n\n    protected clearFieldMap(field:any ):any {\n        if (!field['selection']) return field;\n        field['selection'] = {};\n        field.value = undefined;\n        return field;\n    }\n\n    protected isDefinedFieldMap(field:any ):any {\n        if ('selection' in field && typeof field['selection'] == 'object') {\n            return Object.keys(field['selection']).length > 0;\n        }\n        return false;\n    }\n    protected mapSelected(fieldName) {\n        if (!this.detail[fieldName] || typeof this.detail[fieldName]['selection'] != 'object') {\n            return false;\n        }\n        return this.isDefinedFieldMap(this.detail[fieldName]);\n    }\n    /***End: handle map fields***/\n    /***Start: handle array fields***/\n    protected formatArrayField(field: any, elementType: string): any {\n        let selectArray = [];\n        let values = [];\n        if (Array.isArray(field)) { //not defined\n            for (let e of field) {\n              if (elementType === 'ObjectId') {\n                let ref = this.formatReferenceField(e, \"...\");\n                selectArray.push(ref);\n                values.push(ref.value);\n              } else if (elementType === 'SchemaString') {\n                selectArray.push(e);\n                values.push(e);\n              }\n            }\n        }\n        values = values.filter(x=>!!x);\n        let value = values.join(\" | \")\n        return {'selection': selectArray, value: value};\n\n    }\n    protected formatArrayFields(detail:any ):any {\n        for (let f of this.arrayFields) {\n            //[fieldName, elementType]\n            detail[f[0]] = this.formatArrayField(detail[f[0]], f[1]);\n        }\n        return detail;\n    }\n\n    protected deFormatArrayFields(detail:any ):any {\n        for (let f of this.arrayFields) {\n            //[fieldName, elementType]\n            let fnm = f[0];\n            let elementType = f[1];\n          \n            if (typeof detail[fnm] !== 'object') { //not defined\n                delete detail[fnm];\n            }\n            else {\n                if (! detail[fnm].selection) delete detail[fnm];\n                else {\n                    let selectArray = [];\n                    for (let e of detail[fnm].selection) {\n                      if (elementType === 'ObjectId') {\n                        if (e && e['_id'] && typeof e['_id'] === 'string') selectArray.push(e['_id']);\n                      } else if (elementType === 'SchemaString') {\n                        if (e) selectArray.push(e);\n                      }\n                    }\n\n                    if (selectArray.length > 0) detail[fnm] = selectArray;\n                    else delete detail[fnm];\n                }\n            }\n        }\n        return detail;\n    }\n\n    protected clearFieldArray(field:any ):any {\n        if (!field['selection']) return field;\n        field['selection'] = [];\n        field.value = undefined;\n        return field;\n    }\n\n    protected isDefinedFieldArray(field:any ):any {\n        if ('selection' in field && Array.isArray(field['selection'])) {\n            return field['selection'].length > 0;\n        }\n        return false;\n    }\n    protected arraySelected(fieldName) {\n        if (!this.detail[fieldName] || !Array.isArray(this.detail[fieldName]['selection'])) {\n            return false;\n        }\n        return this.isDefinedFieldArray(this.detail[fieldName]);\n    }\n    /***End: handle array fields***/\n  \n    protected formatDetail(detail:any ):any {\n        detail = this.formatReference(detail);\n        detail = this.formatDate(detail);\n        detail = this.formatArrayMultiSelection(detail);\n        detail = this.formatArrayFields(detail);\n        detail = this.formatMapFields(detail);\n        return detail;\n    }    \n    \n    protected deFormatDetail(detail:any ):any {\n        let cpy = Util.clone(detail);\n        \n        cpy = this.deFormatReference(cpy);\n        cpy = this.deFormatDate(cpy);\n        cpy = this.deFormatArrayMultiSelection(cpy);\n        cpy = this.deFormatArrayFields(cpy);\n        cpy = this.deFormatMapFields(cpy);\n        return cpy;\n    }\n    \n    protected populateDetail(id: string):EventEmitter<any> {\n      return this.populateDetailForAction(id, null);\n    }\n\n    protected populateDetailForAction(id: string, action: string):EventEmitter<any> {\n      //action: eg: action=edit  -> get detail for editing purpose \n      this.service.getDetailForAction(id, action).subscribe(\n        detail => {\n            let originalDetail = Util.clone(detail);\n            if (detail[\"_id\"]) this.commonService.putToStorage(detail[\"_id\"], originalDetail);//cache it\n            \n            this.detail = this.formatDetail(detail);\n            this.extraFieldsUnload();//unload data to text editors, etc\n            if (action == 'edit') {\n              this.extraInfoPopulate();//collect other info required for edit view\n            }\n            if (this.refreshing) {\n              this.refreshing = false;\n              let snackBarConfig: SnackBarConfig = {\n                  content: \"Detail refreshed\"\n              }\n              let snackBar = new SnackBar(snackBarConfig);\n              snackBar.show();\n            }\n            this.eventEmitter.emit(this.detail);\n        },\n        this.onServiceError\n      );\n      return this.eventEmitter;\n    }\n    \n\n    protected populateDetailFromCopy(copy_id:string):void {\n      this.service.getDetail(copy_id).subscribe(\n        detail => {            \n            this.detail = this.formatDetail(detail);\n            delete this.detail[\"_id\"];\n            this.extraFieldsUnload();//unload data to text editors, etc\n            this.extraInfoPopulate();//collect other info required for create view\n        },\n        this.onServiceError\n      );\n    }\n\n    protected extraInfoPopulate() {\n        for (let fieldDef of this.mapFields) { \n          //fieldDef: [field.fieldName, field.elementType, keyType, keyRefName, keyRefService, keyRefSubField]\n          let fieldName = fieldDef[0]; //this.<keyRefName>.<keyRefSubField>\n          let mapKeyType = fieldDef[2]; //this.<keyRefName>.<keyRefSubField>\n          let keyArray = [];\n          if (mapKeyType == \"ObjectId\") {\n            let keyRefName = fieldDef[3];\n            let recordKey = 'key-id-' + keyRefName;\n            let refService = this.injector.get(fieldDef[4]);\n            let id = this.detail[keyRefName]?this.detail[keyRefName]['_id'] : undefined;\n            if (!id) continue;\n            let mapField = this.detail[fieldName];\n            if (mapField[recordKey] == id) continue; //already populated for the same id\n            \n            refService.getDetail(id).subscribe(\n              detail => {\n                if (Array.isArray(detail[fieldDef[5]])) {\n                  keyArray = detail[fieldDef[5]];\n                  mapField['keys'] = keyArray;\n                  mapField[recordKey] = id; //record that keys is populated from this object\n                  if (mapField['selection']) {\n                    for (let k of keyArray) {\n                      if (!(k in mapField['selection'])) mapField['selection'][k] = \"\";\n                    }\n                  }\n                }\n              },\n              this.onServiceError\n            );\n          }          \n        }\n    }\n  \n    private equalTwoSearchContextArrays (arr1, arr2) {\n      if (!arr1) arr1 = [];\n      if (!arr2) arr2 = [];\n      if (arr1.length == 0 && arr2.length == 0) return true;\n      //all object in array has format of {'field': 'value'} format\n      function compareObj(a, b) {\n          let a_s = JSON.stringify(a), b_s = JSON.stringify(b)\n          if (a_s < b_s)\n              return -1;\n          if (a_s > b_s)\n              return 1;\n          return 0;\n      }\n      arr1 = arr1.sort(compareObj);\n      arr2 = arr2.sort(compareObj);\n      if (JSON.stringify(arr1) == JSON.stringify(arr2)) return true;\n      return false;\n    }\n\n    protected processSearchContext() {\n        this.moreSearchOpened = false;\n        let d = this.detail;\n        for (let s of this.stringFields) {\n            d[s] = this.searchText;\n        }\n        let orSearchContext = [], andSearchContext = [];\n        for (let field in d) {\n            if (typeof d[field] == 'string') {\n                let o = {}\n                o[field] = d[field];\n                orSearchContext.push(o);\n            }\n        }\n        \n        this.searchMoreDetail = []\n        let d2 = this.deFormatDetail(d);//undefined field is deleted after this step\n        for (let field in d2) {\n            if (this.stringFields.indexOf(field) == -1) {//string fields already put to orSearchContext\n                let o = {}\n                let valueToShow;\n\n                o[field] = d2[field];\n\n                if (this.multiSelectionFields.includes(field)) {\n                    o[field] = {$in: d2[field]}; //use $in for or, and $all for and\n\n                    let t = this.formatArrayMultiSelectionField(d2[field], this.enums[field]);\n                    valueToShow = t.value;\n                } else if (this.arrayFields.some(x=>x[0] == field)) {                  \n                    o[field] = {$in: d2[field]}; //use $in for or, and $all for and\n                  \n                    valueToShow = d[field]['value'];\n                } else if (this.dateFields.includes(field)) {\n                    let t = this.formatDateField(d2[field]);\n                    valueToShow = t.value;\n                } else if (this.referenceFields.includes(field)) {\n                    valueToShow = valueToShow = d[field]['value'];\n                } else {\n                    valueToShow = d[field];//take directoy from what we get \n                }\n\n                this.searchMoreDetail.push([field, valueToShow]);\n                andSearchContext.push(o);\n            }\n        }\n        //Handle date range selection. These fields are not in d2, because field.date is undefined.\n        for (let prop of this.dateFields) {\n            let o = {};\n            let valueToShow = \"\";\n            \n            o[prop] = {};\n            if (typeof d[prop] !== 'object') { //not defined\n                continue;\n            }\n            if (!d[prop]['from'] && !d[prop]['to']) { //not range\n                continue;\n            }\n            if (d[prop]['from']) {\n                o[prop]['from'] = this.deFormatDateField(d[prop]['from']);\n                valueToShow += this.formatDateField(o[prop]['from']).value;\n            }\n            valueToShow += \" ~ \";\n            if (d[prop]['to']) {\n                o[prop]['to'] = this.deFormatDateField(d[prop]['to']);\n                valueToShow += this.formatDateField(o[prop]['to']).value;\n            }\n            this.searchMoreDetail.push([prop, valueToShow]);\n            andSearchContext.push(o);\n        }\n\n        let searchContext = {'$and': [{'$or': orSearchContext},{'$and': andSearchContext}]};\n        /* searchContext ={'$and', [{'$or', []},{'$and', []}]}\n        */\n        let context = this.getFromStorage(\"searchContext\");\n        if (context && context[\"$and\"]) {\n            let cachedOr, cachedAnd;\n            for (let sub of context[\"$and\"]) {\n                if ('$and' in sub) cachedAnd = sub['$and'];\n                else if ('$or' in sub) cachedOr = sub['$or'];\n            }\n            if (this.equalTwoSearchContextArrays(cachedOr, orSearchContext) \n                && this.equalTwoSearchContextArrays(cachedAnd, andSearchContext)) {\n                return;\n            }\n        } \n        \n        if (orSearchContext.length == 0 && andSearchContext.length == 0) searchContext = null;\n        this.putToStorage(\"searchContext\", searchContext);\n        this.putToStorage(\"searchText\", this.searchText);\n        this.putToStorage(\"page\", 1);//start from 1st page\n        this.putToStorage(\"searchMoreDetail\", this.searchMoreDetail);\n        this.putToStorage(\"detail\", this.detail);\n    }\n    protected searchList():void {\n        this.processSearchContext();\n        //update the URL\n        this.router.navigate(['.', {}], {relativeTo: this.route});//start from 1st page\n        this.putToStorage(\"page\", 1);//start from 1st page\n        this.populateList();\n    }\n    protected loadUIFromCache():void {\n        //Now let's reload the search condition to UI\n        this.searchText = this.getFromStorage(\"searchText\");\n        this.searchMoreDetail = this.getFromStorage(\"searchMoreDetail\");\n        let detail = this.getFromStorage(\"detail\");\n        if (detail) this.detail = detail;\n    }\n    \n    protected populateList():EventEmitter<any> {\n        //First let's handle page\n        let new_page;\n        let searchContext, searchText;\n\n        let url_page = parseInt(this.route.snapshot.paramMap.get('page'));\n        let cached_page = parseInt(this.getFromStorage(\"page\"));\n            \n        if (cached_page) { \n            new_page = cached_page;\n            if (cached_page == 1)\n                this.router.navigate(['.', {}], {relativeTo: this.route, });//update the url\n            else\n                this.router.navigate(['.', {page: cached_page}], {relativeTo: this.route, });//update the url\n        }\n        else if (url_page) new_page = url_page;\n        else new_page = 1;\n\n        searchContext = this.getFromStorage(\"searchContext\");\n        this.loadUIFromCache();      \n\n        this.service.getList(new_page, this.per_page, searchContext).subscribe(\n          result => { \n            this.list = result.items.map(x=>this.formatDetail(x));\n            this.page = result.page;\n            this.per_page = result.per_page;\n            this.total_count = result.total_count;\n            this.total_pages = result.total_pages;\n            this.populatePages();\n            \n            this.checkedItem = \n                Array.apply(null, Array(this.list.length)).map(Boolean.prototype.valueOf,false);\n            this.checkAll = false;\n            \n            if (this.refreshing) {\n              this.refreshing = false;\n              let snackBarConfig: SnackBarConfig = {\n                  content: \"List refreshed\"\n              }\n              let snackBar = new SnackBar(snackBarConfig);\n              snackBar.show();\n            }\n            this.eventEmitter.emit(this.list);\n          },\n          this.onServiceError\n        );\n      return this.eventEmitter;\n    }\n    \n    \n    /*UI operations handlers*/\n    public onRefresh():void {\n        if (this.view == ViewType.LIST) {\n          this.refreshing = true;\n          this.populateList();\n        } else if (this.view == ViewType.DETAIL) {\n          this.refreshing = true;\n          if (!this.id) this.id = this.route.snapshot.paramMap.get('id');\n          if (this.id) this.populateDetail(this.id);\n          else console.error(\"Routing error for detail view... no id...\");\n        }\n    }\n    \n    public onCheckAllChange():void {\n        this.checkedItem = \n             Array.apply(null, Array(this.list.length)).\n                map(Boolean.prototype.valueOf,this.checkAll);\n    }\n    \n    public isItemSelected():boolean {\n        return this.checkedItem.some((value)=>{return value;})\n    }\n\n    public onDeleteSelected():void {\n        let deletedItem = [];\n        this.checkedItem.forEach((value, index) => {\n                if (value) {\n                    deletedItem.push(this.list[index][\"_id\"]);\n                }\n            });\n        \n        let modalConfig: ModalConfig = {\n        title: \"Delete Confirmation\",\n        content: \"Are you sure you want to delete selected items from the system?\",\n        //list of button text\n        buttons: ['Delete', 'Cancel'],\n        //list of button returns when clicked\n        returns: [true, false],\n        callBack: (result) => {\n            if (result) {\n                this.service.deleteManyByIds(deletedItem).subscribe(\n                    result => {\n                        let snackBarConfig: SnackBarConfig = {\n                            content: this.ItemCamelName + \" deleted\"\n                        }\n                        let snackBar = new SnackBar(snackBarConfig);\n                        snackBar.show();\n\n                        if (this.view != ViewType.LIST)\n                            this.router.navigate(['../../list'], {relativeTo: this.route});\n                        else {\n                            let len = this.checkedItem.length;\n                            for (let i = 0; i < len; i++ ) {\n                                let idx = len - 1 - i;\n                                let value = this.checkedItem[idx];\n                                if (value) {\n                                    this.list.splice(idx, 1);\n                                    this.checkedItem.splice(idx,1);\n                                    this.total_count -= 1;\n                                }\n                            };\n                        }\n                    },\n                    this.onServiceError\n                );\n            }\n          }\n        }\n      let modal = new Modal(modalConfig);\n      modal.show();\n    }\n    \n    public onDelete(id:string, idx: number):void {      \n      let modalConfig: ModalConfig = {\n        title: \"Delete Confirmation\",\n        content: \"Are you sure you want to delete this \" + this.itemCamelName + \" from the system?\",\n        //list of button text\n        buttons: ['Delete', 'Cancel'],\n        //list of button returns when clicked\n        returns: [true, false],\n        callBack: (result) => {\n            if (result) {\n                this.service.deleteOne(id).subscribe(\n                    result => {\n                        let snackBarConfig: SnackBarConfig = {\n                            content: this.ItemCamelName + \" deleted\"\n                        }\n                        let snackBar = new SnackBar(snackBarConfig);\n                        snackBar.show();\n\n                        if (this.view != ViewType.LIST)\n                            this.router.navigate(['../../list'], {relativeTo: this.route});\n                        else if (idx!=null && this.list) {\n                                this.list.splice(idx, 1);\n                                this.checkedItem.splice(idx,1);\n                                this.total_count -= 1;\n                            }\n                    },\n                    this.onServiceError\n                );\n            }\n        }\n      }\n      \n      let modal = new Modal(modalConfig);\n      modal.show();\n    }\n    \n    public onSubmit():void {\n      if (!this.extraFieldsLoad()) return; //error from other non ngModel fields;\n        \n      this._detail = this.deFormatDetail(this.detail);\n      if (this.id) {\n          this.service.updateOne(this.id, this._detail).subscribe(\n            result => {\n                var snackBarConfig: SnackBarConfig = {\n                    content: this.ItemCamelName + \" updated.\"\n                }\n                var snackBar = new SnackBar(snackBarConfig);\n                snackBar.show();\n                \n                this.router.navigate(['../../detail', this.id], {relativeTo: this.route});\n            },\n            this.onServiceError\n          );\n      }\n      else {\n          this.service.createOne(this._detail).subscribe(\n            result => {\n                let action = this.subEdit? \" added\":\" created.\";\n\n                var snackBarConfig: SnackBarConfig = {\n                    content: this.ItemCamelName + action\n                }\n                var snackBar = new SnackBar(snackBarConfig);\n                snackBar.show();\n                \n                this.id = result[\"_id\"];\n                this._detail = result;\n\n                if (this.subEdit) {\n                    this.done.emit(true);\n                } else {\n                    this.router.navigate(['../detail', this.id], {relativeTo: this.route});\n                } \n            },\n            this.onServiceError\n          );\n      }\n    }\n    \n    public editCancel(): void {\n        if (this.subEdit) {\n            this.done.emit(false);\n        } else {\n            this.goBack();\n        } \n    }\n\n    protected clickedId = null;\n    public onDisplayRefClicked(fn:string, detail:any, event:any):void {\n        let ref = this.getRefFromField(fn);\n        let d = detail;\n        \n        if (d && d['_id']) {\n            if (this.list) {\n                for (let item of this.list){\n                    if (item[fn] == d) this.clickedId = item['_id'];\n                }\n            }\n            this.router.navigate([ref, 'detail', d['_id']], {relativeTo: this.getParentActivatedRouter() });\n        }\n        if (event) event.stopPropagation();\n    }\n\n    public onDetailLinkClicked(id:string):void {\n        this.clickedId = id; \n        this.router.navigate([this.itemName, 'detail', id], {relativeTo: this.getParentActivatedRouter() });\n    }\n    \n    protected getRefFromField(fn:string):string {\n        return this.referenceFieldsMap[fn];\n    }\n\n    public clearValueFromDetail(field:string):void {\n        if (!this.detail.hasOwnProperty(field)) return;\n        if (typeof this.detail[field] == 'undefined') return;\n        if (typeof this.detail[field] == 'object') {//reference field or date\n            if (this.multiSelectionFields.includes(field)) {\n                this.detail[field] = this.clearFieldArrayMultiSelection(this.detail[field]);\n            } else if (this.arrayFields.some(x=>x[0] == field)) {\n                this.detail[field] = this.clearFieldArray(this.detail[field]);\n            } else if (this.mapFields.some(x=>x[0] == field)) {\n                this.detail[field] = this.clearFieldMap(this.detail[field]);\n            } else if (this.dateFields.includes(field)) {\n                this.detail[field] = this.clearFieldDate(this.detail[field]);\n            } else if (this.referenceFields.includes(field)) {\n                this.detail[field] = this.clearFieldReference(this.detail[field]);\n            }\n            //check if any info needs to change after clear certain values;\n            this.extraInfoPopulate();\n        } else {\n            delete this.detail[field];\n        }\n    }\n    public clearValueFromArrayField(field: string, idx: number):void {\n        if (this.detail[field]['selection']) {\n            this.detail[field]['selection'] = this.detail[field]['selection'].filter((x,i)=> i != idx );\n            //check if any info needs to change after clear certain values;\n            this.extraInfoPopulate();\n        }\n    }\n    public clearValueFromMapField(field: string, key: string):void {\n        if (this.detail[field]['selection']) {\n            delete this.detail[field]['selection'][key];\n            //check if any info needs to change after clear certain values;\n            this.extraInfoPopulate();\n        }\n    }\n    public clearValueFromMapKey(field: string, key: string):void {\n        if (this.detail[field]['selection']) {\n            this.detail[field]['selection'][key] = undefined;\n            //check if any info needs to change after clear certain values;\n            this.extraInfoPopulate();\n        }\n    }\n  \n    public checkValueDefinedFromDetail(field:string):boolean {\n        let d = this.detail;\n        if (!d.hasOwnProperty(field)) return false;\n        if (typeof d[field] == 'undefined') return false;\n        if (typeof this.detail[field] == 'number' \n            || typeof d[field] == 'string'\n            || typeof d[field] == 'boolean') return true;\n        if (typeof d[field] == 'object') {\n            if (this.multiSelectionFields.includes(field)) {\n                return this.isDefinedFieldArrayMultiSelection(d[field]);\n            } else if (this.arrayFields.some(x=>x[0] == field)) {\n                return this.isDefinedFieldArray(d[field]);\n            } else if (this.mapFields.some(x=>x[0] == field)) {\n                return this.isDefinedFieldMap(d[field]);\n            } else if (this.dateFields.includes(field)) {\n                return this.isDefinedFieldDate(d[field]);\n            } else if (this.referenceFields.includes(field)) {\n                return this.isDefinedFieldReference(d[field]);\n            }\n        }\n        return false;\n    }\n\n    public clearValueFromDetailAndSearchList(field:string):void {\n        this.clearValueFromDetail(field);\n        this.searchList();\n    }\n    \n    public onAddArrayItem(fieldName:string) {\n        if (this.arrayFields.some(x=>x[0] == fieldName)) {\n          if (this.detail[fieldName]['new']) { //where new added item is stored\n            let item = this.detail[fieldName]['new'];\n            this.detail[fieldName]['new'] = undefined; //clear it\n            \n            this.detail[fieldName]['selection'].push(item);\n          \n            let values = [];\n            if (this.detail[fieldName]['value']) values = this.detail[fieldName]['value'].split(' | ')\n            values.push(item); //display value\n            values = values.filter(x=>!!x);\n            this.detail[fieldName]['value'] = values.join(' | ');\n            \n            //see if related info needs to change after the change of this value\n            this.extraInfoPopulate();\n          }\n        }                    \n    }\n    public onAddMapItem(fieldName:string) {\n        if (this.mapFields.some(x=>x[0] == fieldName)) {\n          if (this.detail[fieldName]['new']) { //where new added item is stored\n            let item = this.detail[fieldName]['new'];\n            this.detail[fieldName]['new'] = undefined; //clear it\n            \n            this.detail[fieldName]['selection'][item] = undefined; //move to selection object\n            \n            //TODO: this.detail[fieldName]['value'] change\n            \n            //see if related info needs to change after the change of this value\n            this.extraInfoPopulate();\n          }\n        }                    \n    }\n    //**** For parent component of modal UI\n    protected refSelectDirective:any;\n    protected selectComponents:any; //{fieldName: component-type} format\n    protected componentFactoryResolver: any; //injected by extended class, if needed.\n    private componentSubscription\n    public onRefSelect(fieldName:string) {\n        if (!this.refSelectDirective) {\n          console.warn(\"No reference directive for field: \", fieldName);\n          return;\n        }\n        let viewContainerRef = this.refSelectDirective.viewContainerRef;\n        viewContainerRef.clear();\n        \n        if (!this.selectComponents[fieldName]) {\n          console.warn(\"No reference defined for field: \", fieldName);\n          return;\n        }\n        let componentRef = this.selectComponents[fieldName][\"componentRef\"];\n        if (!componentRef) {\n            let comType = this.selectComponents[fieldName][\"select-type\"]\n            if (!comType) console.warn(\"No component type found for reference field \", fieldName);\n\n            let componentFactory = this.componentFactoryResolver.resolveComponentFactory(comType);\n            componentRef = viewContainerRef.createComponent(componentFactory);//create and insert in one call\n            this.selectComponents[fieldName][\"componentRef\"] = componentRef;//save it\n        } else {\n            viewContainerRef.insert(componentRef.hostView);\n        }\n        \n        let componentInstance = <BaseComponentInterface>componentRef.instance;\n        if (this.detail[fieldName]) {\n            if (this.referenceFields.includes(fieldName)) {\n                componentInstance.inputData = this.detail[fieldName]['_id'];\n            }            \n        }\n        componentInstance.setFocus();\n        \n \n        this.componentSubscription = componentInstance.done.subscribe( (val) => {\n            if (val) {\n                this.componentSubscription.unsubscribe();\n                viewContainerRef.detach(); //only detach. not destroy\n            }\n            let outputData = componentInstance.outputData;\n            if (outputData) {\n                switch (outputData.action){\n                    case \"selected\":\n                        if (this.arrayFields.some(x=>x[0] == fieldName)) {\n                            this.detail[fieldName]['selection'].push( outputData.value);\n                          \n                            let values = [];\n                            if (this.detail[fieldName]['value']) values = this.detail[fieldName]['value'].split(' | ')\n                            values.push(outputData.value.value); //display value\n                            values = values.filter(x=>!!x);\n                            this.detail[fieldName]['value'] = values.join(' | ');\n                        } else if (this.referenceFields.includes(fieldName)) {\n                            this.detail[fieldName] = outputData.value;\n                        }                    \n                        //trigger extraInfo populate, once reference changed.\n                        this.extraInfoPopulate();\n                        break;\n                    case \"view\":\n                        this.onRefShow(fieldName, \"select\", outputData.value);//value is _id\n                        break;\n                    default:\n                        break;\n                }                \n            }\n        });\n    }\n    \n    public onRefShow(fieldName:string, action:string, id:string) {\n        if (!id && this.detail[fieldName]) id = this.detail[fieldName]['_id'];\n        if (!id) {\n          console.error('Show reference but no id is given.');\n          return;\n        }\n        let viewContainerRef = this.refSelectDirective.viewContainerRef;\n        viewContainerRef.clear();\n        \n        let detailType = action + \"-detail-type\"; //eg: select-detail-type, pop-detail-type\n        let comType = this.selectComponents[fieldName][detailType]\n        if (!comType) {\n          console.error(\"No component type found for: %s\", detailType);\n          return;\n        }\n        let componentFactory = this.componentFactoryResolver.resolveComponentFactory(comType);\n        let componentRef = viewContainerRef.createComponent(componentFactory);//create and insert in one call\n\n        let componentInstance = <BaseComponentInterface>componentRef.instance;\n        componentInstance.inputData = id;\n        componentInstance.setFocus();\n       \n        componentInstance.done.subscribe( (val) => {\n           if (val) {\n               componentInstance.done.unsubscribe();\n               viewContainerRef.clear();\n           }\n           let outputData = componentInstance.outputData;\n            if (outputData) {\n                switch (outputData.action){\n                    case \"selected\":\n                        if (this.arrayFields.some(x=>x[0] == fieldName)) {\n                            this.detail[fieldName]['selection'].push( outputData.value);\n                          \n                            let values = [];\n                            if (this.detail[fieldName]['value']) values = this.detail[fieldName]['value'].split(' | ')\n                            values.push(outputData.value.value); //display value\n                            values = values.filter(x=>!!x);\n                            this.detail[fieldName]['value'] = values.join(' | ');\n                        } else if (this.referenceFields.includes(fieldName)) {\n                            this.detail[fieldName] = outputData.value;\n                        }                    \n                        //trigger extraInfo populate, once reference changed.\n                        this.extraInfoPopulate();\n                        break;\n                    case \"back\":\n                        this.onRefSelect(fieldName);\n                        break;\n                    default:\n                        break;\n                }                \n            }\n        });\n    }\n    \n    //Following havn't been used yet\n    /*\n    private typingTimer;\n    public onKeyUp(fieldName:string, value:string):void {\n        clearTimeout(this.typingTimer);\n    \n        this.typingTimer = setTimeout(function () {\n            console.log('Input Value:', value);\n        }, 1000);\n    }\n    */\n    //**** For child component of modal UI\n    public inputData;\n    public outputData;\n    public done:any;\n    protected focusEl; //ElementRef\n    setFocus() {\n        if (this.focusEl)\n            this.focusEl.nativeElement.focus();\n    }\n    uiCloseModal() {\n        this.outputData = null;\n        this.done.emit(true);\n    }\n    uiOnEscapeKey() {\n        this.uiCloseModal();\n    }\n\n    protected selectedId = null;\n    selectItemSelected(num:number) {\n        let detail = this.list[num];\n        this.selectedId = detail['_id'];\n        this.clickedId = detail['_id'];\n        this.outputData = {action: \"selected\", \n                            value: {\"_id\": detail[\"_id\"], \"value\": this.stringify(detail)},\n                            detail: detail\n                          };\n        this.done.emit(true);\n    }\n    \n    detailSelSelected() {\n        let detail = this.detail;\n        this.outputData = {action: \"selected\", \n                            value: {\"_id\": detail[\"_id\"], \"value\": this.stringify(detail)},\n                            detail: detail\n                          };\n        this.done.emit(true);\n    }\n\n    selectViewDetail(num:number) {\n        let detail = this.list[num];\n        this.clickedId = detail['_id'];\n        this.outputData = {action: \"view\", \n                            value: detail[\"_id\"]\n                          };\n        this.done.emit(true);\n    }\n    \n    detailSelBack() {\n        this.outputData = {action: \"back\", \n                            value: null\n                          };\n        this.done.emit(true);\n    }\n    \n    //Search more in the list view\n    protected searchText: string;\n    protected searchMoreDetail: any;\n    public moreSearchOpened:boolean = false;\n    toggleMoreSearch() {\n        this.moreSearchOpened = !this.moreSearchOpened;\n    }    \n    onSearchTextClear():void {\n      this.searchText = undefined;\n      if (!this.moreSearchOpened) this.searchList();\n    }\n    onSearchClear() {\n        this.searchText = undefined;\n        let detail = {};\n        this.detail = this.formatDetail(detail);\n        this.searchList();\n    }\n    \n    /* This is for editor related */\n    protected textEditors:any; //type of QueryList<T>\n    protected textEditorMap:any = {};\n    \n    protected extraFieldsUnload() {//from server\n        if (this.textEditors) {\n            this.textEditors.forEach(editor=>{\n                \n                let fieldName = editor.name;\n                let validatorObj = this.textEditorMap[fieldName];\n                if (!validatorObj) return;\n                \n                let content = this.detail[validatorObj.fieldName]\n                if (content) editor.setContent(content);\n            });\n        }\n    }\n        \n    protected extraFieldsLoad() {//to server\n        let result = true;\n        if (this.textEditors) {\n            let array = this.textEditors.toArray();\n            for (let editor of array) {\n                let fieldName = editor.name;\n                let [content,text] = editor.getContent();\n                let validatorObj = this.textEditorMap[fieldName];\n                if (!validatorObj) continue;\n                \n                let fieldState = validatorObj.fieldState;\n                fieldState.errors = {};\n                if (!content) {\n                    if (validatorObj.required) {\n                        fieldState.errors.required = true;\n                        fieldState.valid = false;\n                        result = false;\n                    }\n                    continue;\n                }\n                if ('minlength' in validatorObj && text.length < validatorObj.minlength) {\n                    fieldState.valid = false;\n                    fieldState.errors.minlength = true;\n                    result = false;\n                    continue;\n                }\n                if ('maxlength' in validatorObj && text.length > validatorObj.maxlength) {\n                    fieldState.valid = false;\n                    fieldState.errors.maxlength = true;\n                    result = false;\n                    continue;\n                }\n                if ('validators' in validatorObj) {\n                    let error = validatorObj['validators'].validateValue(text)\n                    if (error) {\n                        fieldState.valid = false;\n                        fieldState.errors = error;\n                        result = false;\n                        continue;\n                    }    \n                }\n                fieldState.valid = true;\n                fieldState.errors = undefined;\n                this.detail[validatorObj.fieldName] = content;\n            }\n        }\n        return result;\n    }\n    onEdtiorPreview(editorName:string) {\n        if (this.textEditors)\n            this.textEditors.forEach( (editor) => {\n                if (editor.name == editorName) editor.preview();\n            });\n    }\n    \n    /*Parent router related*/\n    protected getParentRouteItem():string {\n        let routeSnapshot = this.route.snapshot;\n        let parentItem;\n        do {\n              if (routeSnapshot.data && routeSnapshot.data.mraLevel == 1 ) {\n                parentItem = routeSnapshot.data.item;\n                break;\n              }\n              routeSnapshot = routeSnapshot.parent;\n        } while (routeSnapshot)\n        return parentItem;\n    }\n\n    protected getParentRouteItemId():string {\n        let routeSnapshot = this.route.snapshot;\n        let parentItemId;\n        do {\n              if (routeSnapshot.data && routeSnapshot.data.mraLevel == 1 && ('id' in routeSnapshot.params)) {\n                parentItemId = routeSnapshot.params.id;\n                break;\n              }\n              routeSnapshot = routeSnapshot.parent;\n        } while (routeSnapshot)\n        return parentItemId;\n    }\n        \n    protected getParentRouteRefField():string {\n        let mp = this.referenceFieldsMap;\n        for (let prop in mp) {\n            if (mp.hasOwnProperty(prop) && mp[prop] == this.parentItem) {\n                return prop;\n            }\n        }\n    }\n\n    protected getParentActivatedRouter():ActivatedRoute {\n        let route = this.route;\n        do {\n            let data = route.snapshot.data;\n            //all route inside the mra system will have mraLevel data item\n            if (!data.mraLevel) return route;\n            route = route.parent;\n        } while (route)\n        return this.route.root;\n    }\n    \n    /*Sub detail show flag*/\n    public toggleCheckedItem(i:number):void {\n        this.checkedItem[i] = !this.checkedItem[i];\n    }\n\n    /*** Any View - add new component in the current view*/\n    protected isAdding: boolean = false;\n    public onAdd() {\n        this.isAdding = true;\n    }\n    public toggleAdd() {\n        this.isAdding = !this.isAdding;\n    }\n    public onAddDone(result: boolean) {\n        this.isAdding = false;\n        if (result) { //add successful. Re-populate the current list\n          if (this.view == ViewType.LIST) {\n            this.populateList();\n          }\n        } else {\n            ; //do nothing\n        }\n    }\n    \n    /*Date Range Selection */\n    hoveredDate: any;\n\n    onDateSelectionToggle(fn:string) {\n        this.detail[fn]['pop'] = !this.detail[fn]['pop'];\n    }\n    \n    onDateSelection(fn:string, date: any) {\n        if (!this.detail[fn]['from'] && !this.detail[fn]['to']) {\n          this.detail[fn]['from'] = date;\n        } else if (this.detail[fn]['from'] && !this.detail[fn]['to'] && date.after(this.detail[fn]['from'])) {\n          this.detail[fn]['to'] = date;\n          this.detail[fn]['pop'] = false; //Finished. hide the selection \n        } else {\n          this.detail[fn]['to'] = null;\n          this.detail[fn]['from'] = date;\n        }\n    }\n\n    isHovered(fn:string, date: any) {\n        return this.detail[fn]['from'] && !this.detail[fn]['to'] && this.hoveredDate && date.after(this.detail[fn]['from']) && date.before(this.hoveredDate);\n    }\n\n    isInside(fn:string, date: any) {\n        return date.after(this.detail[fn]['from']) && date.before(this.detail[fn]['to']);\n    }\n\n    isRange(fn:string, date: any) {\n        return date.equals(this.detail[fn]['from']) || date.equals(this.detail[fn]['to']) || this.isInside(fn, date) || this.isHovered(fn, date);\n    }\n}\n","import { Input, Directive } from '@angular/core';\nimport { NG_VALIDATORS, Validator, ValidationErrors, AbstractControl } from '@angular/forms';\n\n@Directive({\n  selector: '[minnumber]',\n  providers: [{provide: NG_VALIDATORS, useExisting: MinNumber, multi: true}]\n})\nexport class MinNumber implements Validator {\n  @Input('minnumber') minnumber: string;\n    \n  validate(control: AbstractControl): ValidationErrors | null {\n    let num = control.value;\n    let minnum = parseFloat(this.minnumber);\n    if (isNaN(minnum)) return null;     //only compare when max is a number\n    //only compare when inputs are numbers\n    if (typeof num == 'number' && num < minnum)\n        return { 'minnumber': \"must be no less than \" + minnum };\n    return null;\n  }\n}\n\n@Directive({\n  selector: '[maxnumber]',\n  providers: [{provide: NG_VALIDATORS, useExisting: MaxNumber, multi: true}]\n})\nexport class MaxNumber implements Validator {\n  @Input('maxnumber') maxnumber: string;\n    \n  validate(control: AbstractControl): ValidationErrors | null {\n    let num = control.value;\n    let maxnum = parseFloat(this.maxnumber);\n    if (isNaN(maxnum)) return null;     //only compare when max is a number\n    //only compare when inputs are numbers\n    if (typeof num == 'number' && num > maxnum)\n        return { 'maxnumber': \"must be no greater than \" + maxnum };\n    return null;\n  }\n}\n\n/* This is how you can get the name of the control - from which you can mapping to the model name\n    let controls = control.parent.controls;\n    let whoami;\n    for( let prop in controls ) {\n        if( controls[ prop ] == control) {\n            whoami = prop;\n            break;\n        }\n    }\n*/\n","import { ElementRef, Renderer2, Directive, Input} from '@angular/core';\n\ndeclare var $: any;\n\nvar fullscreenCss = `\n\n.editorhide {\n    display: none;\n}\n.editorfullscreen {\n    display: block;\n    position: fixed; \n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%; \n    overflow: auto; \n    z-index: 1050;\n    background-color: #fff;\n}\n\n.editor-action-buttons {\n    width: 100%;\n    float:right; \n    text-align: right;\n    margin-bottom: 1.25rem;\n    margin-top: 2.5rem;\n}\n.editor-action-buttons .btn {\n    display: inline-block;\n    margin-left: 2.5rem;\n}\n\n`;\n\nvar fullscreenHtml = `\n<div class=\"editorfullscreen\" id=\"mraeditorfullscreenDiv\">\n\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col\">\n      <div class=\"editor-action-buttons\">\n            <button id=\"mraeditorfullscreenClose\" class=\"btn btn-outline-success\">Close</button>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row\">\n    <div class=\"col\">\n        <div class=\"card\">\n            <div class=\"card-body\" id=\"mrafullscreenHtml\"></div>\n        </div>\n    </div>\n  </div>\n</div>\n\n</div>\n`;\n\n\nvar summerNoteConfig = {\n          minHeight: 200,\n          focus: false,\n          airMode: false,\n          //fontNames: ['Roboto', 'Calibri', 'Times New Roman', 'Arial'],\n          //fontNamesIgnoreCheck: ['Roboto', 'Calibri'],\n          dialogsInBody: true,\n          dialogsFade: true,\n          disableDragAndDrop: false,\n          toolbar: [\n            // [groupName, [list of button]]\n            ['font', ['style', 'fontname','fontsize', 'color']],\n            ['style', ['bold', 'italic', 'underline']],//, 'strikethrough'\n            //['font', [ 'superscript', 'subscript','clear']],\n             ['paragraph', ['ul', 'ol', 'paragraph']],//, 'height'\n             ['insert', ['table', 'picture', 'link', 'video']],//, 'hr'\n            //['misc', ['undo', 'redo', 'print', 'help', 'fullscreen']]\n            ['misc', ['undo', 'redo', 'fullscreen']]\n          ],\n//          popover: {\n//            air: [\n//              ['color', ['color']],\n//              ['font', ['bold', 'underline', 'clear']]\n//            ]\n//          }\n        }\n\n@Directive({\n    selector: '[mra-richtext-select]',\n})\nexport class MraRichTextSelectDirective {\n    @Input('mra-richtext-select') name: string;\n\n    content:string;\n    private id;\n    \n    constructor(private el: ElementRef, private render: Renderer2) {\n        this.id = Date.now();\n\n        //<!-- Create the editor container -->\n        let html = `\n            <div id=\"richtext` + this.id +`\">\n            </div>\n            <div id=\"fullscreen` + this.id +`\"></div>'\n            `; \n\n        if (!$('#mraeditorfullscreenCss').length) {\n            $(\"<style type='text/css' id='mraeditorfullscreenCss'>\" + fullscreenCss + \"</style>\").appendTo(\"head\"); \n        }\n\n\n        this.render.setProperty(this.el.nativeElement, 'innerHTML', html);\n        \n        \n        setTimeout(()=> {\n            if (this.content) $(\"#richtext\"+this.id).html(this.content);\n            $(\"#richtext\"+this.id).summernote(summerNoteConfig);\n        }, 1);\n    }\n    \n    setContent(content:string) {\n        this.content = content;\n        if (this.content) {\n            $(\"#richtext\"+this.id).each(function( index ) {\n              $(this).summernote('destroy');\n            });            \n            $(\"#richtext\"+this.id).html(this.content);\n            $(\"#richtext\"+this.id).summernote(summerNoteConfig);\n        }\n    }\n    \n    getContent():string[] {\n        let html = $(\"#richtext\"+this.id).summernote('code');\n        let text = $(\"<div>\"+html+\"</div>\").text();\n        return [html, text];\n    }\n    preview() {\n        \n        if (!$('#mraeditorfullscreenDiv').length) {\n            $(\"#fullscreen\"+this.id).append(fullscreenHtml); \n        }\n\n        $(\"#mraeditorfullscreenClose\" ).click(function() {\n            $('#mraeditorfullscreenDiv').remove();\n        });\n\n        let [html, text] = this.getContent();\n        $(\"#mrafullscreenHtml\").html(html);\n    }\n}\n\n@Directive({\n    selector: '[mra-richtext-show]',\n})\nexport class MraRichTextShowDirective {\n    @Input('mra-richtext-show') name: string;\n    constructor(private el: ElementRef, private render: Renderer2) {\n    }\n    \n    setContent(content:string) {\n        let id = Date.now();\n        var displayHtml = `\n            <div class=\"card\">\n                <div class=\"card-body\" id=\"mraeditordisplay` + id +`\"></div>\n            </div>\n        `;\n\n        this.render.setProperty(this.el.nativeElement, 'innerHTML', displayHtml);\n        $(\"#mraeditordisplay\" + id).html(content);\n    }\n    \n}\n","import { NgModule } from '@angular/core';\n\nimport { MinNumber, MaxNumber } from './common.directives';\nimport { MraRichTextSelectDirective, MraRichTextShowDirective } from './summernote.directive';\nimport { MraCommonService } from './common.service';\n@NgModule({\n  imports: [\n  ],\n  declarations: [\n    MinNumber,\n    MaxNumber,\n    MraRichTextSelectDirective,\n    MraRichTextShowDirective\n  ],\n  exports: [\n    MinNumber,\n    MaxNumber,\n    MraRichTextSelectDirective,\n    MraRichTextShowDirective\n ],\n  providers: [\n    MraCommonService\n  ],\n})\nexport class MraModule { }","export var dateStructureToString = function(date: any, fmt:string):string {\n    let d, M, yyyy, h, m, s;\n    let value;\n    if (!date) return \"\"; //undefined\n    \n    d = date.day;\n    M = date.month; \n    yyyy = date.year;\n    if (typeof d !== 'number' || typeof M !== 'number'  || typeof yyyy !== 'number' ) return \"\"; //undefined\n    \n    let yy = yyyy.toString().slice(2);    \n    let dd= d<10? '0'+d: d.toString();\n    let MM= M<10? '0'+M: M.toString();\n    \n    value = fmt.replace(/yyyy/ig, yyyy.toString()).\n                   replace(/yy/ig, yy.toString()).\n                   replace(/MM/g, MM.toString()).\n                   replace(/dd/ig, dd.toString());\n    return value;\n}\n\nexport var stringToDateStructure = function(value: string, fmt:string):any {\n    let date;    \n    let result = [];\n    if (value.length != fmt.length) return date; //not ready\n    let regexes = [{re:/yyyy/i, len: 4}, {re: /yy/i, len: 2}, {re:/MM/, len: 2}, {re: /dd/i, len: 2}];\n    for (let reg of regexes) {\n        let p = fmt.search(reg.re); //find position in format\n        let v;\n        if (p != -1) v = parseInt(value.slice(p, p+reg.len));\n        else v = NaN\n        result.push(v);\n    }\n    let [yyyy, yy, M, d] = result;\n    if ( (isNaN(yyyy) && isNaN(yy) ) || isNaN(M) || isNaN(d) ) return date; //undefined\n    return {day:d, month: M, year: yyyy?yyyy:2000+yy };\n\n}\n","import { ActivatedRouteSnapshot, DetachedRouteHandle, RouteReuseStrategy } from '@angular/router'\n\nconst COMPONENT_CACHE_DURATION = 30 * 1000;\nexport class MraRouteReuseStrategy implements RouteReuseStrategy {\n\n    detachedRouteHandles: { [key: string]: any[] } = {}; //key is url, and value is at [handle, timestamp] format\n    pageYOffset = {};\n    editItems = {};\n    isAuth = false;\n\n    /* Start: The following should use the authService. But let's decouple dependency now */\n    private isAuthorized(): boolean {\n        //Refer to AuthenticationService for this function.\n        const authRecord = JSON.parse(localStorage.getItem('mdds-auth-record'));\n        if (authRecord && authRecord.accessToken ) {return true;}\n        return false;\n    }\n    private getLogoutTime(): number {\n        const authRecord = JSON.parse(localStorage.getItem('mdds-auth-record'));\n        if (authRecord) { \n            return authRecord.logoutTs;\n        }\n        return 0;\n    }\n    /* End */\n\n    private isLogoutReload(): boolean {\n        if (this.isAuthorized()) { \n            return false;\n        }\n        const currentTs = Date.now();\n        const logoutTs = this.getLogoutTime();\n        if (currentTs - logoutTs < 1000) { \n            return true;\n        }\n        return false;\n    }\n\n    private checkAuthentication() {\n        const auth = this.isAuth;\n        this.isAuth = this.isAuthorized();\n        if (this.isAuth != auth) { \n            // authentication status changed. Not attach;\n            this.detachedRouteHandles = {}; // empty the map\n        }\n    }\n\n    /** Determines if this route (and its subtree) should be detached to be reused later */\n    public shouldDetach(route: ActivatedRouteSnapshot): boolean {\n        if (route.routeConfig && route.routeConfig.path === 'list') {\n            //save current scroll position\n            let key = route['_routerState'].url;\n            this.pageYOffset[key] = window.pageYOffset;\n        }\n        return route.routeConfig.path === 'list';\n    }\n\n    /** Stores the detached route */\n    public store(route: ActivatedRouteSnapshot, handle: DetachedRouteHandle): void {\n        const date = new Date();\n        const key = route['_routerState'].url;\n        if (!handle) return;\n        this.detachedRouteHandles[key] = [handle, date.getTime()]\n    }\n\n    /** Determines if this route (and its subtree) should be reattached */\n    public shouldAttach(route: ActivatedRouteSnapshot): boolean {\n        this.checkAuthentication();\n        let date = new Date();\n        let key = route['_routerState'].url;\n        if (route.routeConfig && (route.routeConfig.path === 'new' || route.routeConfig.path === 'edit/:id')) {\n            if (route.data && route.data.item) { \n                this.editItems[route.data.item] = true;\n            }\n        }\n        if (!route.routeConfig || route.routeConfig.path !== 'list') {  return false; }\n        if (!this.detachedRouteHandles[key]) { return false; }\n        if (date.getTime() - this.detachedRouteHandles[key][1]  > COMPONENT_CACHE_DURATION)  return false;\n        return true;\n    }\n\n    /** Retrieves the previously stored route */\n    public retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle {\n        let date = new Date();\n        let key = route['_routerState'].url;\n        if (!route.routeConfig || route.routeConfig.path !== 'list') return null;\n        if (route.data.item && (route.data.item in this.editItems)) {\n            delete this.editItems[route.data.item];\n            delete this.detachedRouteHandles[key];\n            return null;\n        }\n        if (!this.detachedRouteHandles[key]) return null;\n        if (date.getTime() - this.detachedRouteHandles[key][1]  > COMPONENT_CACHE_DURATION) return null;\n        \n        let yOffset = this.pageYOffset[key];\n        setTimeout(function () {\n                console.log(\"==retrieve: \", key, yOffset);\n                window.scrollTo(0, yOffset);\n            }, 20); //scroll to saved position\n        \n        return this.detachedRouteHandles[key][0];\n    }\n\n    /** Determines if a route should be reused */\n    public shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): boolean {\n        // Below is the default implementation;\n        if (this.isLogoutReload()) {\n            return false; // authentication status changed. Don't reuse.\n        }\n        return future.routeConfig === curr.routeConfig\n    }\n}\n"],"names":["tslib_1.__values"],"mappings":"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"}
