/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { ElementRef, Renderer2, Directive, Input } from '@angular/core';
/** @type {?} */
var fullscreenCss = "\n\n.editorhide {\n    display: none;\n}\n.editorfullscreen {\n    display: block;\n    position: fixed; \n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%; \n    overflow: auto; \n    z-index: 1050;\n    background-color: #fff;\n}\n\n.editor-action-buttons {\n    width: 100%;\n    float:right; \n    text-align: right;\n    margin-bottom: 1.25rem;\n    margin-top: 2.5rem;\n}\n.editor-action-buttons .btn {\n    display: inline-block;\n    margin-left: 2.5rem;\n}\n\n";
/** @type {?} */
var fullscreenHtml = "\n<div class=\"editorfullscreen\" id=\"mraeditorfullscreenDiv\">\n\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col\">\n      <div class=\"editor-action-buttons\">\n            <button id=\"mraeditorfullscreenClose\" class=\"btn btn-outline-success\">Close</button>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row\">\n    <div class=\"col\">\n        <div class=\"card\">\n            <div class=\"card-body\" id=\"mrafullscreenHtml\"></div>\n        </div>\n    </div>\n  </div>\n</div>\n\n</div>\n";
/** @type {?} */
var summerNoteConfig = {
    minHeight: 200,
    focus: false,
    airMode: false,
    //fontNames: ['Roboto', 'Calibri', 'Times New Roman', 'Arial'],
    //fontNamesIgnoreCheck: ['Roboto', 'Calibri'],
    dialogsInBody: true,
    dialogsFade: true,
    disableDragAndDrop: false,
    toolbar: [
        // [groupName, [list of button]]
        ['font', ['style', 'fontname', 'fontsize', 'color']],
        ['style', ['bold', 'italic', 'underline']],
        //['font', [ 'superscript', 'subscript','clear']],
        ['paragraph', ['ul', 'ol', 'paragraph']],
        ['insert', ['table', 'picture', 'link', 'video']],
        //['misc', ['undo', 'redo', 'print', 'help', 'fullscreen']]
        ['misc', ['undo', 'redo', 'fullscreen']]
    ],
};
var MraRichTextSelectDirective = /** @class */ (function () {
    function MraRichTextSelectDirective(el, render) {
        var _this = this;
        this.el = el;
        this.render = render;
        this.id = Date.now();
        //<!-- Create the editor container -->
        /** @type {?} */
        var html = "\n            <div id=\"richtext" + this.id + "\">\n            </div>\n            <div id=\"fullscreen" + this.id + "\"></div>'\n            ";
        if (!$('#mraeditorfullscreenCss').length) {
            $("<style type='text/css' id='mraeditorfullscreenCss'>" + fullscreenCss + "</style>").appendTo("head");
        }
        this.render.setProperty(this.el.nativeElement, 'innerHTML', html);
        setTimeout(function () {
            if (_this.content)
                $("#richtext" + _this.id).html(_this.content);
            $("#richtext" + _this.id).summernote(summerNoteConfig);
        }, 1);
    }
    /**
     * @param {?} content
     * @return {?}
     */
    MraRichTextSelectDirective.prototype.setContent = /**
     * @param {?} content
     * @return {?}
     */
    function (content) {
        this.content = content;
        if (this.content) {
            $("#richtext" + this.id).each(function (index) {
                $(this).summernote('destroy');
            });
            $("#richtext" + this.id).html(this.content);
            $("#richtext" + this.id).summernote(summerNoteConfig);
        }
    };
    /**
     * @return {?}
     */
    MraRichTextSelectDirective.prototype.getContent = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var html = $("#richtext" + this.id).summernote('code');
        /** @type {?} */
        var text = $("<div>" + html + "</div>").text();
        return [html, text];
    };
    /**
     * @return {?}
     */
    MraRichTextSelectDirective.prototype.preview = /**
     * @return {?}
     */
    function () {
        if (!$('#mraeditorfullscreenDiv').length) {
            $("#fullscreen" + this.id).append(fullscreenHtml);
        }
        $("#mraeditorfullscreenClose").click(function () {
            $('#mraeditorfullscreenDiv').remove();
        });
        var _a = tslib_1.__read(this.getContent(), 2), html = _a[0], text = _a[1];
        $("#mrafullscreenHtml").html(html);
    };
    MraRichTextSelectDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[mra-richtext-select]',
                },] }
    ];
    /** @nocollapse */
    MraRichTextSelectDirective.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 }
    ]; };
    MraRichTextSelectDirective.propDecorators = {
        name: [{ type: Input, args: ['mra-richtext-select',] }]
    };
    return MraRichTextSelectDirective;
}());
export { MraRichTextSelectDirective };
if (false) {
    /** @type {?} */
    MraRichTextSelectDirective.prototype.name;
    /** @type {?} */
    MraRichTextSelectDirective.prototype.content;
    /**
     * @type {?}
     * @private
     */
    MraRichTextSelectDirective.prototype.id;
    /**
     * @type {?}
     * @private
     */
    MraRichTextSelectDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    MraRichTextSelectDirective.prototype.render;
}
var MraRichTextShowDirective = /** @class */ (function () {
    function MraRichTextShowDirective(el, render) {
        this.el = el;
        this.render = render;
    }
    /**
     * @param {?} content
     * @return {?}
     */
    MraRichTextShowDirective.prototype.setContent = /**
     * @param {?} content
     * @return {?}
     */
    function (content) {
        /** @type {?} */
        var id = Date.now();
        /** @type {?} */
        var displayHtml = "\n            <div class=\"card\">\n                <div class=\"card-body\" id=\"mraeditordisplay" + id + "\"></div>\n            </div>\n        ";
        this.render.setProperty(this.el.nativeElement, 'innerHTML', displayHtml);
        $("#mraeditordisplay" + id).html(content);
    };
    MraRichTextShowDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[mra-richtext-show]',
                },] }
    ];
    /** @nocollapse */
    MraRichTextShowDirective.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 }
    ]; };
    MraRichTextShowDirective.propDecorators = {
        name: [{ type: Input, args: ['mra-richtext-show',] }]
    };
    return MraRichTextShowDirective;
}());
export { MraRichTextShowDirective };
if (false) {
    /** @type {?} */
    MraRichTextShowDirective.prototype.name;
    /**
     * @type {?}
     * @private
     */
    MraRichTextShowDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    MraRichTextShowDirective.prototype.render;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3VtbWVybm90ZS5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9tZWFuLXJlc3QtYW5ndWxhci8iLCJzb3VyY2VzIjpbInN1bW1lcm5vdGUuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBQyxNQUFNLGVBQWUsQ0FBQzs7SUFJbkUsYUFBYSxHQUFHLG9lQTZCbkI7O0lBRUcsY0FBYyxHQUFHLHNoQkFzQnBCOztJQUdHLGdCQUFnQixHQUFHO0lBQ2IsU0FBUyxFQUFFLEdBQUc7SUFDZCxLQUFLLEVBQUUsS0FBSztJQUNaLE9BQU8sRUFBRSxLQUFLOzs7SUFHZCxhQUFhLEVBQUUsSUFBSTtJQUNuQixXQUFXLEVBQUUsSUFBSTtJQUNqQixrQkFBa0IsRUFBRSxLQUFLO0lBQ3pCLE9BQU8sRUFBRTtRQUNQLGdDQUFnQztRQUNoQyxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUMsVUFBVSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ25ELENBQUMsT0FBTyxFQUFFLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQztRQUMxQyxrREFBa0Q7UUFDakQsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQ3hDLENBQUMsUUFBUSxFQUFFLENBQUMsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDbEQsMkRBQTJEO1FBQzNELENBQUMsTUFBTSxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxZQUFZLENBQUMsQ0FBQztLQUN6QztDQU9GO0FBRVQ7SUFTSSxvQ0FBb0IsRUFBYyxFQUFVLE1BQWlCO1FBQTdELGlCQXNCQztRQXRCbUIsT0FBRSxHQUFGLEVBQUUsQ0FBWTtRQUFVLFdBQU0sR0FBTixNQUFNLENB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O0lBRTNDLDZDQUFlOzs7OztJQUNmLHdDQUFXOzs7OztJQUVDLHdDQUFzQjs7Ozs7SUFBRSw0Q0FBeUI7O0FBdURqRTtJQUtJLGtDQUFvQixFQUFjLEVBQVUsTUFBaUI7UUFBekMsT0FBRSxHQUFGLEVBQUUsQ0FBWTtRQUFVLFdBQU0sR0FBTixNQUFNLENBQVc7SUFDN0QsQ0FBQzs7Ozs7SUFFRCw2Q0FBVTs7OztJQUFWLFVBQVcsT0FBYzs7WUFDakIsRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUU7O1lBQ2YsV0FBVyxHQUFHLG9HQUVrQyxHQUFHLEVBQUUsR0FBRSx5Q0FFMUQ7UUFFRCxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsRUFBRSxXQUFXLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFDekUsQ0FBQyxDQUFDLG1CQUFtQixHQUFHLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUM5QyxDQUFDOztnQkFsQkosU0FBUyxTQUFDO29CQUNQLFFBQVEsRUFBRSxxQkFBcUI7aUJBQ2xDOzs7O2dCQXpKUSxVQUFVO2dCQUFFLFNBQVM7Ozt1QkEySnpCLEtBQUssU0FBQyxtQkFBbUI7O0lBZ0I5QiwrQkFBQztDQUFBLEFBcEJELElBb0JDO1NBakJZLHdCQUF3Qjs7O0lBQ2pDLHdDQUF5Qzs7Ozs7SUFDN0Isc0NBQXNCOzs7OztJQUFFLDBDQUF5QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVsZW1lbnRSZWYsIFJlbmRlcmVyMiwgRGlyZWN0aXZlLCBJbnB1dH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmRlY2xhcmUgdmFyICQ6IGFueTtcblxudmFyIGZ1bGxzY3JlZW5Dc3MgPSBgXG5cbi5lZGl0b3JoaWRlIHtcbiAgICBkaXNwbGF5OiBub25lO1xufVxuLmVkaXRvcmZ1bGxzY3JlZW4ge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIHBvc2l0aW9uOiBmaXhlZDsgXG4gICAgbGVmdDogMDtcbiAgICB0b3A6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlOyBcbiAgICBvdmVyZmxvdzogYXV0bzsgXG4gICAgei1pbmRleDogMTA1MDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xufVxuXG4uZWRpdG9yLWFjdGlvbi1idXR0b25zIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBmbG9hdDpyaWdodDsgXG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgbWFyZ2luLWJvdHRvbTogMS4yNXJlbTtcbiAgICBtYXJnaW4tdG9wOiAyLjVyZW07XG59XG4uZWRpdG9yLWFjdGlvbi1idXR0b25zIC5idG4ge1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICBtYXJnaW4tbGVmdDogMi41cmVtO1xufVxuXG5gO1xuXG52YXIgZnVsbHNjcmVlbkh0bWwgPSBgXG48ZGl2IGNsYXNzPVwiZWRpdG9yZnVsbHNjcmVlblwiIGlkPVwibXJhZWRpdG9yZnVsbHNjcmVlbkRpdlwiPlxuXG48ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XG4gIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY29sXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZWRpdG9yLWFjdGlvbi1idXR0b25zXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwibXJhZWRpdG9yZnVsbHNjcmVlbkNsb3NlXCIgY2xhc3M9XCJidG4gYnRuLW91dGxpbmUtc3VjY2Vzc1wiPkNsb3NlPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG5cbiAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgIDxkaXYgY2xhc3M9XCJjb2xcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIiBpZD1cIm1yYWZ1bGxzY3JlZW5IdG1sXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuXG48L2Rpdj5cbmA7XG5cblxudmFyIHN1bW1lck5vdGVDb25maWcgPSB7XG4gICAgICAgICAgbWluSGVpZ2h0OiAyMDAsXG4gICAgICAgICAgZm9jdXM6IGZhbHNlLFxuICAgICAgICAgIGFpck1vZGU6IGZhbHNlLFxuICAgICAgICAgIC8vZm9udE5hbWVzOiBbJ1JvYm90bycsICdDYWxpYnJpJywgJ1RpbWVzIE5ldyBSb21hbicsICdBcmlhbCddLFxuICAgICAgICAgIC8vZm9udE5hbWVzSWdub3JlQ2hlY2s6IFsnUm9ib3RvJywgJ0NhbGlicmknXSxcbiAgICAgICAgICBkaWFsb2dzSW5Cb2R5OiB0cnVlLFxuICAgICAgICAgIGRpYWxvZ3NGYWRlOiB0cnVlLFxuICAgICAgICAgIGRpc2FibGVEcmFnQW5kRHJvcDogZmFsc2UsXG4gICAgICAgICAgdG9vbGJhcjogW1xuICAgICAgICAgICAgLy8gW2dyb3VwTmFtZSwgW2xpc3Qgb2YgYnV0dG9uXV1cbiAgICAgICAgICAgIFsnZm9udCcsIFsnc3R5bGUnLCAnZm9udG5hbWUnLCdmb250c2l6ZScsICdjb2xvciddXSxcbiAgICAgICAgICAgIFsnc3R5bGUnLCBbJ2JvbGQnLCAnaXRhbGljJywgJ3VuZGVybGluZSddXSwvLywgJ3N0cmlrZXRocm91Z2gnXG4gICAgICAgICAgICAvL1snZm9udCcsIFsgJ3N1cGVyc2NyaXB0JywgJ3N1YnNjcmlwdCcsJ2NsZWFyJ11dLFxuICAgICAgICAgICAgIFsncGFyYWdyYXBoJywgWyd1bCcsICdvbCcsICdwYXJhZ3JhcGgnXV0sLy8sICdoZWlnaHQnXG4gICAgICAgICAgICAgWydpbnNlcnQnLCBbJ3RhYmxlJywgJ3BpY3R1cmUnLCAnbGluaycsICd2aWRlbyddXSwvLywgJ2hyJ1xuICAgICAgICAgICAgLy9bJ21pc2MnLCBbJ3VuZG8nLCAncmVkbycsICdwcmludCcsICdoZWxwJywgJ2Z1bGxzY3JlZW4nXV1cbiAgICAgICAgICAgIFsnbWlzYycsIFsndW5kbycsICdyZWRvJywgJ2Z1bGxzY3JlZW4nXV1cbiAgICAgICAgICBdLFxuLy8gICAgICAgICAgcG9wb3Zlcjoge1xuLy8gICAgICAgICAgICBhaXI6IFtcbi8vICAgICAgICAgICAgICBbJ2NvbG9yJywgWydjb2xvciddXSxcbi8vICAgICAgICAgICAgICBbJ2ZvbnQnLCBbJ2JvbGQnLCAndW5kZXJsaW5lJywgJ2NsZWFyJ11dXG4vLyAgICAgICAgICAgIF1cbi8vICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5ARGlyZWN0aXZlKHtcbiAgICBzZWxlY3RvcjogJ1ttcmEtcmljaHRleHQtc2VsZWN0XScsXG59KVxuZXhwb3J0IGNsYXNzIE1yYVJpY2hUZXh0U2VsZWN0RGlyZWN0aXZlIHtcbiAgICBASW5wdXQoJ21yYS1yaWNodGV4dC1zZWxlY3QnKSBuYW1lOiBzdHJpbmc7XG5cbiAgICBjb250ZW50OnN0cmluZztcbiAgICBwcml2YXRlIGlkO1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsIHByaXZhdGUgcmVuZGVyOiBSZW5kZXJlcjIpIHtcbiAgICAgICAgdGhpcy5pZCA9IERhdGUubm93KCk7XG5cbiAgICAgICAgLy88IS0tIENyZWF0ZSB0aGUgZWRpdG9yIGNvbnRhaW5lciAtLT5cbiAgICAgICAgbGV0IGh0bWwgPSBgXG4gICAgICAgICAgICA8ZGl2IGlkPVwicmljaHRleHRgICsgdGhpcy5pZCArYFwiPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGlkPVwiZnVsbHNjcmVlbmAgKyB0aGlzLmlkICtgXCI+PC9kaXY+J1xuICAgICAgICAgICAgYDsgXG5cbiAgICAgICAgaWYgKCEkKCcjbXJhZWRpdG9yZnVsbHNjcmVlbkNzcycpLmxlbmd0aCkge1xuICAgICAgICAgICAgJChcIjxzdHlsZSB0eXBlPSd0ZXh0L2NzcycgaWQ9J21yYWVkaXRvcmZ1bGxzY3JlZW5Dc3MnPlwiICsgZnVsbHNjcmVlbkNzcyArIFwiPC9zdHlsZT5cIikuYXBwZW5kVG8oXCJoZWFkXCIpOyBcbiAgICAgICAgfVxuXG5cbiAgICAgICAgdGhpcy5yZW5kZXIuc2V0UHJvcGVydHkodGhpcy5lbC5uYXRpdmVFbGVtZW50LCAnaW5uZXJIVE1MJywgaHRtbCk7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgc2V0VGltZW91dCgoKT0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnQpICQoXCIjcmljaHRleHRcIit0aGlzLmlkKS5odG1sKHRoaXMuY29udGVudCk7XG4gICAgICAgICAgICAkKFwiI3JpY2h0ZXh0XCIrdGhpcy5pZCkuc3VtbWVybm90ZShzdW1tZXJOb3RlQ29uZmlnKTtcbiAgICAgICAgfSwgMSk7XG4gICAgfVxuICAgIFxuICAgIHNldENvbnRlbnQoY29udGVudDpzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICAgICAgaWYgKHRoaXMuY29udGVudCkge1xuICAgICAgICAgICAgJChcIiNyaWNodGV4dFwiK3RoaXMuaWQpLmVhY2goZnVuY3Rpb24oIGluZGV4ICkge1xuICAgICAgICAgICAgICAkKHRoaXMpLnN1bW1lcm5vdGUoJ2Rlc3Ryb3knKTtcbiAgICAgICAgICAgIH0pOyAgICAgICAgICAgIFxuICAgICAgICAgICAgJChcIiNyaWNodGV4dFwiK3RoaXMuaWQpLmh0bWwodGhpcy5jb250ZW50KTtcbiAgICAgICAgICAgICQoXCIjcmljaHRleHRcIit0aGlzLmlkKS5zdW1tZXJub3RlKHN1bW1lck5vdGVDb25maWcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGdldENvbnRlbnQoKTpzdHJpbmdbXSB7XG4gICAgICAgIGxldCBodG1sID0gJChcIiNyaWNodGV4dFwiK3RoaXMuaWQpLnN1bW1lcm5vdGUoJ2NvZGUnKTtcbiAgICAgICAgbGV0IHRleHQgPSAkKFwiPGRpdj5cIitodG1sK1wiPC9kaXY+XCIpLnRleHQoKTtcbiAgICAgICAgcmV0dXJuIFtodG1sLCB0ZXh0XTtcbiAgICB9XG4gICAgcHJldmlldygpIHtcbiAgICAgICAgXG4gICAgICAgIGlmICghJCgnI21yYWVkaXRvcmZ1bGxzY3JlZW5EaXYnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICQoXCIjZnVsbHNjcmVlblwiK3RoaXMuaWQpLmFwcGVuZChmdWxsc2NyZWVuSHRtbCk7IFxuICAgICAgICB9XG5cbiAgICAgICAgJChcIiNtcmFlZGl0b3JmdWxsc2NyZWVuQ2xvc2VcIiApLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnI21yYWVkaXRvcmZ1bGxzY3JlZW5EaXYnKS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IFtodG1sLCB0ZXh0XSA9IHRoaXMuZ2V0Q29udGVudCgpO1xuICAgICAgICAkKFwiI21yYWZ1bGxzY3JlZW5IdG1sXCIpLmh0bWwoaHRtbCk7XG4gICAgfVxufVxuXG5ARGlyZWN0aXZlKHtcbiAgICBzZWxlY3RvcjogJ1ttcmEtcmljaHRleHQtc2hvd10nLFxufSlcbmV4cG9ydCBjbGFzcyBNcmFSaWNoVGV4dFNob3dEaXJlY3RpdmUge1xuICAgIEBJbnB1dCgnbXJhLXJpY2h0ZXh0LXNob3cnKSBuYW1lOiBzdHJpbmc7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlbDogRWxlbWVudFJlZiwgcHJpdmF0ZSByZW5kZXI6IFJlbmRlcmVyMikge1xuICAgIH1cbiAgICBcbiAgICBzZXRDb250ZW50KGNvbnRlbnQ6c3RyaW5nKSB7XG4gICAgICAgIGxldCBpZCA9IERhdGUubm93KCk7XG4gICAgICAgIHZhciBkaXNwbGF5SHRtbCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtYm9keVwiIGlkPVwibXJhZWRpdG9yZGlzcGxheWAgKyBpZCArYFwiPjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG5cbiAgICAgICAgdGhpcy5yZW5kZXIuc2V0UHJvcGVydHkodGhpcy5lbC5uYXRpdmVFbGVtZW50LCAnaW5uZXJIVE1MJywgZGlzcGxheUh0bWwpO1xuICAgICAgICAkKFwiI21yYWVkaXRvcmRpc3BsYXlcIiArIGlkKS5odG1sKGNvbnRlbnQpO1xuICAgIH1cbiAgICBcbn1cbiJdfQ==